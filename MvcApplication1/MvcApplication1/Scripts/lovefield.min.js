/*
  Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
(function(){'use strict';var aa=window,ba=Object,ca=Function,da=document,ea=Math,e=Array,fa=Error,ga=parseInt;function ha(a,b){return a.exec=b}function ia(a,b){return a.getName=b}function ja(a,b){return a.remove=b}function ka(a,b){return a.forEach=b}function la(a,b){return a.values=b}function ma(a,b){return a.clear=b}function na(a,b){return a.bind=b}function f(a,b){return a.toString=b}function oa(a,b){return a.table=b}function pa(a,b){return a.dump=b}function qa(a,b){return a.next=b}
function ra(a,b){return a.close=b}function sa(a,b){return a.clone=b}function ta(a,b){return a.child=b}function ua(a,b){return a.onerror=b}function va(a,b){return a.value=b}function wa(a,b){return a.getPriority=b}function xa(a,b){return a.delete=b}function ya(a,b){return a.subscribe=b}function za(a,b){return a.name=b}function Aa(a,b){return a.length=b}function Ba(a,b){return a.onsuccess=b}function Ca(a,b){return a.update=b}
var Da="context",Ea="filter",Fa="version",Ga="getParent",Ha="shift",Ia="exec",Ja="replace",Ka="concat",La="objectStoreNames",k="getName",m="remove",Ma="orderByChild",Na="autoIncrement",n="forEach",Oa="values",Pa="clear",q="bind",Qa="getTime",Sa="continue",r="toString",Ta="global",Ua="propertyIsEnumerable",Va="create",t="table",Wa="compare",Xa="result",Ya="size",Za="index",$a="next",ab="split",bb="hasOwnProperty",cb="close",db="once",eb="setImmediate",fb="transaction",gb="child",hb="rows",u="contains",
ib="apply",v="push",jb="reject",kb="reduce",lb="addAll",w="slice",x="value",mb="item",nb="objectStore",ob="indexOf",pb="getPriority",qb="delete",rb="name",y="length",z="prototype",A="then",C="entries",sb="removeChild",tb="openCursor",ub="target",D="call",vb="resolve",wb="some",xb="sort",yb="every",zb="update",E="splice",F="join",Ab="unshift";function Bb(){return function(){}}function Cb(a){return function(b){this[a]=b}}function G(a){return function(){return this[a]}}
function Db(a){return function(){return a}}var H,Eb=this;function Fb(a){return void 0!==a}function I(a,b,c){a=a[ab](".");c=c||Eb;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a[y]&&(d=a[Ha]());)!a[y]&&Fb(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}function Gb(){}function Hb(a){a.ue=function(){return a.Pf?a.Pf:a.Pf=new a}}
function Ib(a){var b=typeof a;if("object"==b)if(a){if(a instanceof e)return"array";if(a instanceof ba)return b;var c=ba[z][r][D](a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a[y]&&"undefined"!=typeof a[E]&&"undefined"!=typeof a[Ua]&&!a[Ua]("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a[D]&&"undefined"!=typeof a[Ua]&&!a[Ua]("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a[D])return"object";return b}
function Jb(a){return null===a}function Kb(a){return null!=a}function Lb(a){var b=Ib(a);return"array"==b||"object"==b&&"number"==typeof a[y]}function Mb(a){return"string"==typeof a}function Nb(a){return"function"==Ib(a)}function Ob(a){return a[Pb]||(a[Pb]=++Qb)}var Pb="closure_uid_"+(1E9*ea.random()>>>0),Qb=0;function Rb(a,b,c){return a[D][ib](a[q],arguments)}
function Sb(a,b,c){if(!a)throw fa();if(2<arguments[y]){var d=e[z][w][D](arguments,2);return function(){var c=e[z][w][D](arguments);e[z][Ab][ib](c,d);return a[ib](b,c)}}return function(){return a[ib](b,arguments)}}function J(a,b,c){J=ca[z][q]&&-1!=ca[z][q][r]()[ob]("native code")?Rb:Sb;return J[ib](null,arguments)}function Tb(a,b){var c=e[z][w][D](arguments,1);return function(){var b=c[w]();b[v][ib](b,arguments);return a[ib](this,b)}}
function K(a,b){function c(){}c.prototype=b[z];a.eb=b[z];a.prototype=new c;a[z].constructor=a;a.Fk=function(a,c,h){for(var l=e(arguments[y]-2),p=2;p<arguments[y];p++)l[p-2]=arguments[p];return b[z][c][ib](a,l)}}na(ca[z],ca[z][q]||function(a,b){if(1<arguments[y]){var c=e[z][w][D](arguments,1);c[Ab](this,a);return J[ib](null,c)}return J(this,a)});function Ub(a){if(fa.captureStackTrace)fa.captureStackTrace(this,Ub);else{var b=fa().stack;b&&(this.stack=b)}a&&(this.message=String(a))}K(Ub,fa);za(Ub[z],"CustomError");function Vb(a,b){for(var c=a[ab]("%s"),d="",g=e[z][w][D](arguments,1);g[y]&&1<c[y];)d+=c[Ha]()+g[Ha]();return d+c[F]("%s")};function Wb(a,b){b[Ab](a);Ub[D](this,Vb[ib](null,b));b[Ha]()}K(Wb,Ub);za(Wb[z],"AssertionError");function Xb(a,b,c,d){var g="Assertion failed";if(c)var g=g+(": "+c),h=d;else a&&(g+=": "+a,h=b);throw new Wb(""+g,h||[]);}function L(a,b,c){a||Xb("",null,b,e[z][w][D](arguments,2));return a}function Yb(a,b){throw new Wb("Failure"+(a?": "+a:""),e[z][w][D](arguments,1));}function Zb(a,b,c){Nb(a)||Xb("Expected function but got %s: %s.",[Ib(a),a],b,e[z][w][D](arguments,2));return a};function $b(a,b,c){this.yj=c;this.Rh=a;this.gk=b;this.Ld=0;this.Dd=null}$b[z].get=function(){var a;0<this.Ld?(this.Ld--,a=this.Dd,this.Dd=a[$a],qa(a,null)):a=this.Rh();return a};$b[z].put=function(a){this.gk(a);this.Ld<this.yj&&(this.Ld++,qa(a,this.Dd),this.Dd=a)};var ac=e[z],bc=ac[ob]?function(a,b,c){L(null!=a[y]);return ac[ob][D](a,b,c)}:function(a,b,c){c=null==c?0:0>c?ea.max(0,a[y]+c):c;if(Mb(a))return Mb(b)&&1==b[y]?a[ob](b,c):-1;for(;c<a[y];c++)if(c in a&&a[c]===b)return c;return-1},cc=ac[n]?function(a,b,c){L(null!=a[y]);ac[n][D](a,b,c)}:function(a,b,c){for(var d=a[y],g=Mb(a)?a[ab](""):a,h=0;h<d;h++)h in g&&b[D](c,g[h],h,a)},dc=ac.map?function(a,b,c){L(null!=a[y]);return ac.map[D](a,b,c)}:function(a,b,c){for(var d=a[y],g=e(d),h=Mb(a)?a[ab](""):a,l=0;l<
d;l++)l in h&&(g[l]=b[D](c,h[l],l,a));return g},ec=ac[kb]?function(a,b,c,d){L(null!=a[y]);d&&(b=J(b,d));return ac[kb][D](a,b,c)}:function(a,b,c,d){var g=c;cc(a,function(c,l){g=b[D](d,g,c,l,a)});return g},fc=ac[wb]?function(a,b,c){L(null!=a[y]);return ac[wb][D](a,b,c)}:function(a,b,c){for(var d=a[y],g=Mb(a)?a[ab](""):a,h=0;h<d;h++)if(h in g&&b[D](c,g[h],h,a))return!0;return!1},gc=ac[yb]?function(a,b,c){L(null!=a[y]);return ac[yb][D](a,b,c)}:function(a,b,c){for(var d=a[y],g=Mb(a)?a[ab](""):a,h=0;h<
d;h++)if(h in g&&!b[D](c,g[h],h,a))return!1;return!0};function hc(a,b){L(null!=a[y]);return 1==ac[E][D](a,b,1)[y]}function ic(a,b,c){a:{for(var d=a[y],g=Mb(a)?a[ab](""):a,h=0;h<d;h++)if(h in g&&b[D](c,g[h],h,a)){b=h;break a}b=-1}return 0<=b?(hc(a,b),!0):!1}function jc(a){var b=a[y];if(0<b){for(var c=e(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function kc(a,b){for(var c=1;c<arguments[y];c++){var d=arguments[c];if(Lb(d)){var g=a[y]||0,h=d[y]||0;Aa(a,g+h);for(var l=0;l<h;l++)a[g+l]=d[l]}else a[v](d)}}function lc(a,b,c,d){L(null!=a[y]);return ac[E][ib](a,mc(arguments,1))}function mc(a,b,c){L(null!=a[y]);return 2>=arguments[y]?ac[w][D](a,b):ac[w][D](a,b,c)}function nc(a,b,c,d,g){for(var h=0,l=a[y],p;h<l;){var B=h+l>>1,Ra;Ra=c?b[D](g,a[B],B,a):b(d,a[B]);0<Ra?h=B+1:(l=B,p=!Ra)}return p?h:~h}function oc(a,b){return a>b?1:a<b?-1:0}
function pc(a,b,c){c=nc(a,c||oc,!1,b);return 0>c?(lc(a,-(c+1),0,b),!0):!1}function qc(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}function rc(a){for(var b=[],c=0;c<arguments[y];c++){var d=arguments[c];if("array"==Ib(d))for(var g=0;g<d[y];g+=8192)for(var h=mc(d,g,g+8192),h=rc[ib](null,h),l=0;l<h[y];l++)b[v](h[l]);else b[v](d)}return b};function sc(a,b,c){for(var d in a)b[D](c,a[d],d,a)}function tc(a,b,c){for(var d in a)if(b[D](c,a[d],d,a))return!0;return!1}function uc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function vc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};var wc;a:{var xc=Eb.navigator;if(xc){var yc=xc.userAgent;if(yc){wc=yc;break a}}wc=""};function zc(a){Eb.setTimeout(function(){throw a;},0)}var Ac;
function Bc(){var a=Eb.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof aa&&aa.postMessage&&aa.addEventListener&&-1==wc[ob]("Presto")&&(a=function(){var a=da.createElement("IFRAME");a.style.display="none";a.src="";da.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a[cb]();var c="callImmediate"+ea.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=J(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==wc[ob]("Edge")&&-1==wc[ob]("Trident")&&-1==wc[ob]("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(Fb(c[$a])){c=c[$a];var a=c.sf;c.sf=null;a()}};return function(a){qa(d,{sf:a});d=d[$a];b.port2.postMessage(0)}}return"undefined"!==typeof da&&"onreadystatechange"in da.createElement("SCRIPT")?function(a){var b=da.createElement("SCRIPT");b.onreadystatechange=
function(){b.onreadystatechange=null;b.parentNode[sb](b);b=null;a();a=null};da.documentElement.appendChild(b)}:function(a){Eb.setTimeout(a,0)}};function Cc(){this.$d=this.Yb=null}var Ec=new $b(function(){return new Dc},function(a){a.reset()},100);Cc[z].add=function(a,b){var c=this.cj();c.set(a,b);this.$d?qa(this.$d,c):(L(!this.Yb),this.Yb=c);this.$d=c};ja(Cc[z],function(){var a=null;this.Yb&&(a=this.Yb,this.Yb=this.Yb[$a],this.Yb||(this.$d=null),qa(a,null));return a});Cc[z].hk=function(a){Ec.put(a)};Cc[z].cj=function(){return Ec.get()};function Dc(){this.scope=this.pe=null;qa(this,null)}
Dc[z].set=function(a,b){this.pe=a;this.scope=b;qa(this,null)};Dc[z].reset=function(){this.scope=this.pe=null;qa(this,null)};function Fc(a,b){Gc||Hc();Ic||(Gc(),Ic=!0);Jc.add(a,b)}var Gc;function Hc(){if(Eb.Promise&&Eb.Promise[vb]){var a=Eb.Promise[vb]();Gc=function(){a[A](Kc)}}else Gc=function(){var a=Kc;if(!Nb(Eb[eb])||Eb.Window&&Eb.Window[z]&&Eb.Window[z][eb]==Eb[eb])Ac||(Ac=Bc()),Ac(a);else Eb[eb](a)}}var Ic=!1,Jc=new Cc;[][v](function(){Ic=!1;Jc=new Cc});function Kc(){for(var a=null;a=Jc[m]();){try{a.pe[D](a.scope)}catch(b){zc(b)}Jc.hk(a)}Ic=!1};function M(a,b){this.ya=0;this.ug=void 0;this.ed=this.bc=this.C=null;this.Cd=this.oe=!1;if(a==Lc)this.oc(2,b);else try{var c=this;a[D](b,function(a){c.oc(2,a)},function(a){if(!(a instanceof Mc))try{if(a instanceof fa)throw a;throw fa("Promise rejected.");}catch(b){}c.oc(3,a)})}catch(d){this.oc(3,d)}}function Nc(){ta(this,null);this.context=this.mc=this.Nb=null;qa(this,null);this.ce=!1}Nc[z].reset=function(){ta(this,null);this.context=this.mc=this.Nb=null;this.ce=!1};
var Oc=new $b(function(){return new Nc},function(a){a.reset()},100);function Pc(a,b,c){var d=Oc.get();d.Nb=a;d.mc=b;d.context=c;return d}function Lc(){}function Qc(a){return a instanceof M?a:new M(Lc,a)}function Rc(a){return new M(function(b,c){c(a)})}function Sc(a){return new M(function(b,c){var d=a[y],g=[];if(d)for(var h=function(a,c){d--;g[a]=c;0==d&&b(g)},l=function(a){c(a)},p=0,B;B=a[p];p++)Tc(B,Tb(h,p),l);else b(g)})}
function Uc(){var a,b,c=new M(function(c,g){a=c;b=g});return new Vc(c,a,b)}M[z].then=function(a,b,c){null!=a&&Zb(a,"opt_onFulfilled should be a function.");null!=b&&Zb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return this.gf(Nb(a)?a:null,Nb(b)?b:null,c)};M[z].then=M[z][A];M[z].$goog_Thenable=!0;H=M[z];
H.vk=function(a,b,c){null!=a&&Zb(a,"opt_onFulfilled should be a function.");null!=b&&Zb(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");this.ff(Pc(a||Gb,b||null,c))};function Tc(a,b,c,d){a instanceof M?a.vk(b,c,d):a[A](b,c,d)}H.Hg=function(a,b){return this.gf(null,a,b)};H.ff=function(a){this.mj()||2!=this.ya&&3!=this.ya||this.xg();this.Yj(a)};
H.gf=function(a,b,c){var d=Pc(null,null,null);ta(d,new M(function(g,h){d.Nb=a?function(b){try{var d=a[D](c,b);g(d)}catch(B){h(B)}}:g;d.mc=b?function(a){try{var d=b[D](c,a);!Fb(d)&&a instanceof Mc?h(a):g(d)}catch(B){h(B)}}:h}));d[gb].C=this;this.ff(d);return d[gb]};H.Mg=function(a){L(1==this.ya);this.ya=0;this.oc(2,a)};H.Ng=function(a){L(1==this.ya);this.ya=0;this.oc(3,a)};
H.oc=function(a,b){if(0==this.ya){if(this==b)a=3,b=new TypeError("Promise cannot resolve to itself");else{var c;if(b)try{c=!!b.$goog_Thenable}catch(d){c=!1}else c=!1;if(c){this.ya=1;Tc(b,this.Mg,this.Ng,this);return}c=typeof b;if("object"==c&&null!=b||"function"==c)try{var g=b[A];if(Nb(g)){this.yk(b,g);return}}catch(h){a=3,b=h}}this.ug=b;this.ya=a;this.C=null;this.xg();3!=a||b instanceof Mc||Wc(this,b)}};
H.yk=function(a,b){function c(a){h||(h=!0,g.Ng(a))}function d(a){h||(h=!0,g.Mg(a))}this.ya=1;var g=this,h=!1;try{b[D](a,d,c)}catch(l){c(l)}};H.xg=function(){this.oe||(this.oe=!0,Fc(this.li,this))};H.mj=function(){return!!this.bc};H.Yj=function(a){L(null!=a.Nb);this.ed?qa(this.ed,a):this.bc=a;this.ed=a};H.Rj=function(){var a=null;this.bc&&(a=this.bc,this.bc=a[$a],qa(a,null));this.bc||(this.ed=null);null!=a&&L(null!=a.Nb);return a};
H.li=function(){for(var a=null;a=this.Rj();)this.ki(a,this.ya,this.ug);this.oe=!1};H.ki=function(a,b,c){3==b&&a.mc&&!a.ce&&this.ek();if(a[gb])a[gb].C=null,Xc(a,b,c);else try{a.ce?a.Nb[D](a[Da]):Xc(a,b,c)}catch(d){Yc[D](null,d)}Oc.put(a)};function Xc(a,b,c){2==b?a.Nb[D](a[Da],c):a.mc&&a.mc[D](a[Da],c)}H.$g=Bb();H.ek=function(){var a;for(a=this;a&&a.Cd;a=a.C)a.Cd=!1};function Wc(a,b){a.Cd=!0;Fc(function(){a.Cd&&(a.$g(b),Yc[D](null,b))})}var Yc=zc;function Mc(a){Ub[D](this,a)}K(Mc,Ub);za(Mc[z],"cancel");
function Vc(a,b,c){this.ga=a;this.resolve=b;this.reject=c};
function Zc(a,b){this.va=a;this.Pb=b||this.xf()}var $c=0;H=Zc[z];H.id=G("va");H.ih=Cb("va");H.w=G("Pb");H.xf=function(){return{}};H.Ig=G("Pb");H.Fa=function(){return{id:this.va,value:this.Ig()}};H.Pc=function(a){return"#"==a.substr(-1)?this.va:null};function ad(a){return new Zc(a.id,a[x])}function bd(a){return new Zc($c++,a||{})}function cd(a){if(null==a)return"";a=new Uint8Array(a);for(var b="",c=0;c<a[y];++c)var d=a[c][r](16),b=b+(2>d[y]?"0"+d:d);return b};
function dd(a){this.type=a}function ed(a){Zc[D](this,-1,a)}K(ed,Zc);
var fd={};I("lf.TransactionType",fd,void 0);fd.READ_ONLY=0;fd.READ_WRITE=1;

function gd(a,b){this.Ya=a;this.Jg=b;this.ba=Uc()}H=gd[z];H.Pi=G("Ya");H.U=function(){return(0==this.Jg?Qc():this.Dj())[A](J(function(){this.Ya.U()},this))};H.Dj=function(){this.Ej();this.Cj();return this.ba.ga};H.Ej=function(){var a=this.Ya.Ef();a.G()[n](function(b){var c=this.Ya.ca().get(b),c=this.Z(c[k](),J(c.dc,c));b=a.get(b);var d=b.rd().c().map(function(a){return a.id()});0<d[y]&&c[m](d).Hg(this.Be,this);b=b.wd().c().map(function(a){return a[1]})[Ka](b.qd().c());c.put(b).Hg(this.Be,this)},this)};
H.Cj=function(){this.Ya.Mi()[n](function(a){var b=this.Z(a[k](),ad),c;b.get([-1])[A](function(a){c=a;return b[m]([])})[A](function(){b.put(c);b.put(a.Fa())},J(this.Be,this))},this)};H.Be=function(a){this.ba[jb](a)};function hd(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var g=a[y],h=b[y],l=[],p=0;p<g+1;p++)l[p]=[],l[p][0]=0;for(var B=0;B<h+1;B++)l[0][B]=0;for(p=1;p<=g;p++)for(B=1;B<=h;B++)c(a[p-1],b[B-1])?l[p][B]=l[p-1][B-1]+1:l[p][B]=ea.max(l[p-1][B],l[p][B-1]);for(var Ra=[],p=g,B=h;0<p&&0<B;)c(a[p-1],b[B-1])?(Ra[Ab](d(p-1,B-1)),p--,B--):l[p-1][B]>l[p][B-1]?p--:B--;return Ra}function id(a){return ec(arguments,function(a,c){return a+c},0)}
function jd(a){return id[ib](null,arguments)/arguments[y]}function kd(a){var b=arguments[y];if(2>b)return 0;var c=jd[ib](null,arguments);return id[ib](null,dc(arguments,function(a){return ea.pow(a-c,2)}))/(b-1)}function ld(a){return ea.sqrt(kd[ib](null,arguments))};var md="StopIteration"in Eb?Eb.StopIteration:{message:"StopIteration",stack:""};function nd(){}qa(nd[z],function(){throw md;});nd[z].sc=function(){return this};function od(a){if(a instanceof nd)return a;if("function"==typeof a.sc)return a.sc(!1);if(Lb(a)){var b=0,c=new nd;qa(c,function(){for(;;){if(b>=a[y])throw md;if(b in a)return a[b++];b++}});return c}throw fa("Not implemented");}
function pd(a,b,c){if(Lb(a))try{cc(a,b,c)}catch(d){if(d!==md)throw d;}else{a=od(a);try{for(;;)b[D](c,a[$a](),void 0,a)}catch(g){if(g!==md)throw g;}}}function qd(a){if(fc(arguments,function(a){return!a[y]})||!arguments[y])return new nd;var b=new nd,c=arguments,d=qc(0,c[y]);qa(b,function(){if(d){for(var a=dc(d,function(a,b){return c[b][a]}),b=d[y]-1;0<=b;b--){L(d);if(d[b]<c[b][y]-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw md;});return b};function N(a,b){this.g={};this.b=[];this.Ma=this.$=0;var c=arguments[y];if(1<c){if(c%2)throw fa("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this[lb](a)}H=N[z];H.na=G("$");H.c=function(){this.zc();for(var a=[],b=0;b<this.b[y];b++)a[v](this.g[this.b[b]]);return a};H.G=function(){this.zc();return this.b[Ka]()};H.s=function(a){return rd(this.g,a)};H.kd=function(a){for(var b=0;b<this.b[y];b++){var c=this.b[b];if(rd(this.g,c)&&this.g[c]==a)return!0}return!1};
H.Fc=function(a,b){if(this===a)return!0;if(this.$!=a.na())return!1;var c=b||sd;this.zc();for(var d,g=0;d=this.b[g];g++)if(!c(this.get(d),a.get(d)))return!1;return!0};function sd(a,b){return a===b}H.Ha=function(){return 0==this.$};ma(H,function(){this.g={};Aa(this.b,0);this.Ma=this.$=0});ja(H,function(a){return rd(this.g,a)?(delete this.g[a],this.$--,this.Ma++,this.b[y]>2*this.$&&this.zc(),!0):!1});
H.zc=function(){if(this.$!=this.b[y]){for(var a=0,b=0;a<this.b[y];){var c=this.b[a];rd(this.g,c)&&(this.b[b++]=c);a++}Aa(this.b,b)}if(this.$!=this.b[y]){for(var d={},b=a=0;a<this.b[y];)c=this.b[a],rd(d,c)||(this.b[b++]=c,d[c]=1),a++;Aa(this.b,b)}};H.get=function(a,b){return rd(this.g,a)?this.g[a]:b};H.set=function(a,b){rd(this.g,a)||(this.$++,this.b[v](a),this.Ma++);this.g[a]=b};H.addAll=function(a){var b;a instanceof N?(b=a.G(),a=a.c()):(b=vc(a),a=uc(a));for(var c=0;c<b[y];c++)this.set(b[c],a[c])};
ka(H,function(a,b){for(var c=this.G(),d=0;d<c[y];d++){var g=c[d],h=this.get(g);a[D](b,h,g,this)}});sa(H,function(){return new N(this)});H.sc=function(a){this.zc();var b=0,c=this.Ma,d=this,g=new nd;qa(g,function(){if(c!=d.Ma)throw fa("The map has changed since the iterator was created");if(b>=d.b[y])throw md;var g=d.b[b++];return a?g:d.g[g]});return g};function rd(a,b){return ba[z][bb][D](a,b)};
function td(a){this.ik=a}f(td[z],G("ik"));var ud=new td("backstore"),vd=new td("cache"),wd=new td("indexstore"),xd=new td("engine"),yd=new td("runner"),zd=new td("observerregistry"),Ad=new td("schema");
function Bd(a){if("function"==typeof a.na)a=a.na();else if(Lb(a)||Mb(a))a=a[y];else{var b=0,c;for(c in a)b++;a=b}return a}function Cd(a){if("function"==typeof a.c)return a.c();if(Mb(a))return a[ab]("");if(Lb(a)){for(var b=[],c=a[y],d=0;d<c;d++)b[v](a[d]);return b}return uc(a)}
function Dd(a,b,c){if("function"==typeof a[yb])return a[yb](b,c);if(Lb(a)||Mb(a))return gc(a,b,c);var d;if("function"==typeof a.G)d=a.G();else if("function"!=typeof a.c)if(Lb(a)||Mb(a)){d=[];for(var g=a[y],h=0;h<g;h++)d[v](h)}else d=vc(a);else d=void 0;for(var g=Cd(a),h=g[y],l=0;l<h;l++)if(!b[D](c,g[l],d&&d[l],a))return!1;return!0};function O(a){this.g=new N;a&&this[lb](a)}function Ed(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+Ob(a):b.substr(0,1)+a}H=O[z];H.na=function(){return this.g.na()};H.add=function(a){this.g.set(Ed(a),a)};H.addAll=function(a){a=Cd(a);for(var b=a[y],c=0;c<b;c++)this.add(a[c])};ja(H,function(a){return this.g[m](Ed(a))});ma(H,function(){this.g[Pa]()});H.Ha=function(){return this.g.Ha()};H.contains=function(a){return this.g.s(Ed(a))};H.Kh=function(a){return Dd(a,this[u],this)};H.c=function(){return this.g.c()};
sa(H,function(){return new O(this)});H.Fc=function(a){return this.na()==Bd(a)&&this.vj(a)};H.vj=function(a){var b=Bd(a);if(this.na()>b)return!1;!(a instanceof O)&&5<b&&(a=new O(a));return Dd(this,function(b){var d=a;if("function"==typeof d[u])b=d[u](b);else if("function"==typeof d.kd)b=d.kd(b);else if(Lb(d)||Mb(d))b=0<=bc(d,b);else a:{for(var g in d)if(d[g]==b){b=!0;break a}b=!1}return b})};H.sc=function(){return this.g.sc(!1)};
function Fd(a,b){this.va=a;this.Pb=b||{}}function Gd(a){var b=new O;a[n](function(a){b.add(a>>9)});return b.c()}H=Fd[z];H.ka=G("va");H.jc=G("Pb");H.Ag=function(a){a[n](function(a){this.Pb[a.id()]=a.Fa()},this)};H.dk=function(a){a[n](function(a){var c=this.Pb;a in c&&delete c[a]},this)};H.Fa=function(){return{id:this.va,value:JSON.stringify(this.Pb)}};function Hd(a){return new Fd(a.id,JSON.parse(a[x]))};

function Id(a,b,c){this.O=a;this.Gb=b;this.vg=c}H=Id[z];H.get=function(a){return 0==a[y]?this.se():this.Ti(a)[A](J(function(b){return a.map(function(a){var d=b.get(a>>9);L(d,"Containing page is empty");return this.Gb(d.jc()[a])},this)},this))};H.Ti=function(a){var b=new N,c=Uc();a=Gd(a).map(function(a){return new M(function(c,h){var l;try{l=this.O.get(a)}catch(p){h(p);return}ua(l,h);Ba(l,J(function(a){a=Hd(a[ub][Xa]);b.set(a.ka(),a);c()},this))},this)},this);Sc(a)[A](function(){c[vb](b)});return c.ga};
H.se=function(){return new M(function(a,b){var c=[],d;try{d=this.O[tb]()}catch(g){b(g);return}ua(d,b);Ba(d,J(function(){var b=d[Xa];if(b){var g=Hd(b[x]).jc(),p;for(p in g)c[v](this.Gb(g[p]));b[Sa]()}else a(c)},this))},this)};H.Qb=function(a){return new M(function(b,c){var d;try{d=a()}catch(g){c(g);return}Ba(d,b);ua(d,c)},this)};
H.put=function(a){if(0==a[y])return Qc();var b=new N;a[n](function(a){var d;d=a.id()>>9;var g=b.get(d,null);null===g&&(g=this.vg(this.O[rb],d));g.Ag([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Qb(J(function(){return this.O.put(a.Fa())},this))},this);return Sc(a)};
ja(H,function(a){if(0==a[y])return this.Qb(J(function(){return this.O[Pa]()},this));var b=new N;a[n](function(a){var d=a>>9,g=b.get(d,null);null===g&&(g=this.vg(this.O[rb],d));g.dk([a]);b.set(d,g)},this);a=b.c().map(function(a){return this.Qb(J(function(){var b;a:{b=a.jc();for(var g in b){b=!1;break a}b=!0}return b?this.O[qb](a.ka()):this.O.put(a.Fa())},this))},this);return Sc(a)});function Jd(a,b,c){a=a.o(vd);var d=[c<<9,(c+1<<9)-1];b=a.Va(b,d[0],d[1]);c=new Fd(c);c.Ag(b);return c}
function Kd(a,b){return new Fd(b)};
function Ld(){};
function Md(a){this.pa=a.o(vd);this.N=a.o(wd);this.A=a.o(Ad)}Ca(Md[z],function(a){a[n](function(a){this.Bk(a);this.zk(a)},this)});Md[z].zk=function(a){var b=a[k]();a.rd().c()[n](function(a){this.pa[m](b,[a.id()])},this);a.qd()[n](function(a){this.pa.set(b,[a])},this);a.wd()[n](function(a){this.pa.set(b,[a[1]])},this)};Md[z].Bk=function(a){var b=this.A[t](a[k]());a.Ki()[n](function(a){this.Pg(b,a)},this)};
Md[z].Pg=function(a,b){a.Ga().map(function(a){return this.N.get(a.l())},this)[Ka]([this.N.get(a.Ib())])[n](function(a){var d=null===b[1]?null:b[1].Pc(a[k]()),g=null===b[0]?null:b[0].Pc(a[k]());null===g&&null!==d?a.add(d,b[1].id()):null===g||null===d?null!==g&&null===d&&a[m](g,b[0].id()):0!=a.Bc()[Wa](g,d)&&(a.add(d,b[1].id()),a[m](g,b[0].id()))})};
function P(a,b){za(this,a);this.message=b};
function Nd(a){this.N=a.o(wd)}Nd[z].ti=function(a,b){var c=a.ic().xe();return null===c?null:this.si(c,b)};Nd[z].si=function(a,b){var c=a.l(),d=b.Pc(c),c=this.N.get(c).get(d);return 0==c[y]?null:c[0]};Nd[z].ie=function(a,b){var c=a.ic().Ri();b[n](function(a){c[n](function(b){if(null===a.w()[b[k]()])throw new P("ConstraintError","Attempted to insert NULL value to non-nullable field "+b.l());},this)},this)};
function Od(a){this.hb=new N;this.Ia=new N;this.kb=new N;this.B=a}H=Od[z];ia(H,G("B"));H.qd=G("hb");H.wd=G("Ia");H.rd=G("kb");H.add=function(a){if(this.kb.s(a.id())){var b=[this.kb.get(a.id()),a];this.Ia.set(a.id(),b);this.kb[m](a.id())}else this.hb.set(a.id(),a)};H.modify=function(a){var b=a[0],c=a[1];L(b.id()==c.id(),"Row ID mismatch between old/new values.");b=b.id();this.hb.s(b)?this.hb.set(b,c):(this.Ia.s(b)&&(a=[this.Ia.get(a[0].id())[0],c]),this.Ia.set(b,a))};
xa(H,function(a){if(this.hb.s(a.id()))this.hb[m](a.id());else if(this.Ia.s(a.id())){var b=this.Ia.get(a.id())[0];this.Ia[m](a.id());this.kb.set(a.id(),b)}else this.kb.set(a.id(),a)});H.Ki=function(){var a=[];this.hb.c()[n](function(b){a[v]([null,b])},this);this.Ia.c()[n](function(b){a[v](b)},this);this.kb.c()[n](function(b){a[v]([b,null])},this);return a};f(H,function(){return"["+this.hb.G()[r]()+"], ["+this.Ia.G()[r]()+"], ["+this.kb.G()[r]()+"]"});
H.Xi=function(){var a=new Od(this.B);this.hb.c()[n](function(b){a[qb](b)},this);this.kb.c()[n](function(b){a.add(b)},this);this.Ia.c()[n](function(b){a.modify([b[1],b[0]])},this);return a};H.Ha=function(){return this.hb.Ha()&&this.kb.Ha()&&this.Ia.Ha()};
function Pd(a,b){this.Sa=new N;b[n](function(a){this.Sa.set(a[k](),a)},this);this.pa=a.o(vd);this.N=a.o(wd);this.jd=new Nd(a);this.Ed=new Md(a);this.Pe=this.Wd=!1;this.Cb=new N}H=Pd[z];H.Ef=G("Cb");H.Mi=function(){var a=[];this.Cb.G().map(function(a){return this.Sa.get(a)},this)[n](function(b){b.Rb()&&(b.Ga()[n](function(b){a[v](this.N.get(b.l()))},this),a[v](this.N.get(b[k]()+".#")))},this);return a};H.ca=G("Sa");
H.Ni=function(){var a=[];this.Sa.c()[n](function(b){b.Rb()&&(b.Ga()[n](function(b){a[v](b.l())}),a[v](b[k]()+".#"))});return a};H.sb=function(a,b){this.xc();this.fd(a);this.jd.ie(a,b);for(var c=0;c<b[y];c++)this.Gd(a,null,b[c])};
H.Gd=function(a,b,c){var d=a[k](),g=this.Cb.get(d,null)||new Od(d);this.Cb.set(d,g);var h=[b,c];try{this.Ed.Pg(a,h)}catch(l){throw this.Pe=!0,l;}null===b&&null!==c?(this.pa.set(d,[c]),g.add(c)):null!==b&&null!==c?(this.pa.set(d,[c]),g.modify(h)):null!==b&&null===c&&(this.pa[m](d,[b.id()]),g[qb](b))};Ca(H,function(a,b){this.xc();this.fd(a);this.jd.ie(a,b);for(var c=0;c<b[y];c++){var d=b[c],g=this.pa.get([d.id()])[0];this.Gd(a,g,d)}});
H.Ee=function(a,b){this.xc();this.fd(a);this.jd.ie(a,b);for(var c=0;c<b[y];c++){var d=b[c],g=null,h=this.jd.ti(a,d);null!=h&&(g=this.pa.get([h])[0],d.ih(h));this.Gd(a,g,d)}};ja(H,function(a,b){this.xc();this.fd(a);for(var c=0;c<b[y];c++)this.Gd(a,b[c],null)});H.U=function(){this.xc();this.Wd=!0};H.xc=function(){L(!this.Pe,"Attemptted to use journal that needs to be rolled back.");L(!this.Wd,"Attemptted to commit a terminated journal.")};
H.Ab=function(){L(!this.Wd,"Attempted to rollback a terminated journal.");var a=this.Cb.c().map(function(a){return a.Xi()},this);this.Ed[zb](a);this.Wd=!0;this.Pe=!1};H.fd=function(a){if(!this.Sa.s(a[k]()))throw new P("ScopeError",a[k]()+" is not in the journal's scope.");};
var Qd={};I("lf.Order",Qd,void 0);Qd.DESC=0;Qd.ASC=1;
function Rd(a,b,c,d){this.f=a;this.u=b;this.aa=null===this.f?!1:c;this.fa=null===this.u?!1:d}H=Rd[z];f(H,function(){return(this.aa?"(":"[")+(null===this.f?"unbound":this.f)+", "+(null===this.u?"unbound":this.u)+(this.fa?")":"]")});H.Gh=function(){if(null===this.f&&null===this.u)return[];var a=null,b=null;null===this.f||(a=new Rd(null,this.f,!1,!this.aa));null===this.u||(b=new Rd(this.u,null,!this.fa,!1));return[a,b][Ea](function(a){return null!==a})};
H.reverse=function(){return new Rd(this.u,this.f,this.fa,this.aa)};H.jg=function(a){var b=Sd(this.f,a.f,!0,this.aa,a.aa);if(0==b)return!0;var c=-1==b?this:a;a=1==b?this:a;return null===c.u||c.u>a.f||c.u==a.f&&!c.fa&&!a.aa};function Td(){return new Rd(null,null,!1,!1)}H.contains=function(a){var b=null===this.u||a<this.u||a==this.u&&!this.fa;return(null===this.f||a>this.f||a==this.f&&!this.aa)&&b};H.Fc=function(a){return this.f==a.f&&this.aa==a.aa&&this.u==a.u&&this.fa==a.fa};
function Sd(a,b,c,d,g){function h(a){return c?a:1==a?-1:1}d=d||!1;g=g||!1;return null===a?null===b?(d?!g:g)?d?h(1):h(-1):0:h(-1):null===b?h(1):a<b?-1:a==b?(d?!g:g)?d?h(1):h(-1):0:1}function Ud(a,b){var c=Sd(a.f,b.f,!0,a.aa,b.aa);0==c&&(c=Sd(a.u,b.u,!1,a.fa,b.fa));return c};
function Vd(a,b){this.entries=a;this.I=new O(b);this.Db=null}H=Vd[z];H.sj=function(a){return this.I.Fc(a.I)};function Wd(a,b){L(a.sj(b),"Intersection/union operations only apply to compatible relations.")}H.W=function(){return this.I.c()};H.Ge=function(){return 1<this.I.na()};H.ve=function(){return this[C].map(function(a){return a.ta.w()})};H.Zi=function(){return this[C].map(function(a){return a.ta.id()})};H.jk=function(a,b){null===this.Db&&(this.Db=new N);this.Db.set(a.l(),b)};
H.hc=function(a){L(null!==this.Db,"getAggregationResult called before any results have been calculated.");var b=this.Db.get(a.l(),void 0);L(Fb(b),"Could not find result for "+a.l());return b};H.kj=function(a){return null!==this.Db&&this.Db.s(a.l())};var Xd=null;function Yd(){null===Xd&&(Xd=new Vd([],[]));return Xd}
function Zd(a){if(0==a[y])return Yd();for(var b=a[kb](function(b,c){Wd(a[0],c);return b+c[C][y]},0),c=e(b),d=0,b=a.map(function(a){var b=new N;a[C][n](function(a){c[d++]=a;b.set(a.id,a)});return b}),g=new N,h=0;h<c[y];h++)b[yb](function(a){return a.s(c[h].id)})&&g.set(c[h].id,c[h]);return new Vd(g.c(),a[0].I.c())}function $d(a){if(0==a[y])return Yd();var b=new N;a[n](function(c){Wd(a[0],c);c[C][n](function(a){b.set(a.id,a)})});return new Vd(b.c(),a[0].I.c())}
function ae(a,b){var c=1<b[y],d=a.map(function(a){return new be(a,c)});return new Vd(d,b)}function be(a,b){this.ta=a;this.id=ce++;this.He=b}var ce=0;be[z].M=function(a){var b=a.Ua();return null!==b&&this.ta.w()[bb](b)?this.ta.w()[b]:this.He?this.ta.w()[a.Z().Aa()][a[k]()]:this.ta.w()[a[k]()]};be[z].We=function(a,b){var c=a.Ua();if(null!=c)this.ta.w()[c]=b;else if(this.He){var c=a.Z().Aa(),d=this.ta.w()[c];null==d&&(d={},this.ta.w()[c]=d);d[a[k]()]=b}else this.ta.w()[a[k]()]=b};
function de(a,b,c,d){function g(a,b){if(a.He){var c=a.ta.w(),d;for(d in c)h[d]=c[d]}else L(!h[bb](b[0]),"Attempted to join table with itself, without using table alias, or same alias "+b[0]+"is reused for multiple tables."),h[b[0]]=a.ta.w()}var h={};g(a,b);g(c,d);a=new Zc(-1,h);return new be(a,!0)};
I("lf.bind",function(a){return new ee(a)},void 0);function ee(a){this.wa=a}I("lf.Binder",ee,void 0);ee[z].qb=G("wa");
var fe={};I("lf.Type",fe,void 0);fe.ARRAY_BUFFER=0;fe.BOOLEAN=1;fe.DATE_TIME=2;fe.INTEGER=3;fe.NUMBER=4;fe.STRING=5;fe.OBJECT=6;var ge={0:new ArrayBuffer(0),1:!1,2:ba.freeze(new Date(0)),3:0,4:0,5:"",6:ba.freeze({})};I("lf.type.DEFAULT_VALUES",ge,void 0);
function he(){var a=ie();this.ci=new N(1,je(),2,ke(),4,a,3,a,5,le())}Hb(he);he[z].te=function(a,b){var c=this.ci.get(a,null);L(null!==c,"Could not find evaluation map for "+a);c=c.get(b,null);L(null!==c,"Could not find evaluator for "+a+", "+b);return c};
function ie(){return new N("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[ob](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"neq",function(a,b){return a!=b})}
function le(){return new N("between",function(a,b){return a>=b[0]&&a<=b[1]},"eq",function(a,b){return a==b},"gte",function(a,b){return a>=b},"gt",function(a,b){return a>b},"in",function(a,b){return-1!=b[ob](a)},"lte",function(a,b){return a<=b},"lt",function(a,b){return a<b},"match",function(a,b){return(new RegExp(b)).test(a)},"neq",function(a,b){return a!=b})}
function ke(){return new N("between",function(a,b){return a[Qa]()>=b[0][Qa]()&&a[Qa]()<=b[1][Qa]()},"eq",function(a,b){return(null===a?-1:a[Qa]())==(null===b?-1:b[Qa]())},"gte",function(a,b){return a[Qa]()>=b[Qa]()},"gt",function(a,b){return a[Qa]()>b[Qa]()},"in",function(a,b){return b[wb](function(b){return b[Qa]()==a[Qa]()})},"lte",function(a,b){return a[Qa]()<=b[Qa]()},"lt",function(a,b){return a[Qa]()<b[Qa]()},"neq",function(a,b){return(null===a?-1:a[Qa]())!=(null===b?-1:b[Qa]())})}
function je(){return new N("eq",function(a,b){return a==b},"neq",function(a,b){return a!=b})};function me(a,b){this.Yf=a;this.Qg=b}me[z].getKey=G("Yf");me[z].dj=G("Qg");sa(me[z],function(){return new me(this.Yf,this.Qg)});function ne(a,b){me[D](this,a,b);this.i=this.C=null}K(ne,me);var oe=[];H=ne[z];sa(H,function(){return new ne(this.getKey(),this.dj())});H.getParent=G("C");H.Sf=function(){return!this.ua()};H.Y=function(){return this.i||oe};H.pb=function(a){return this.Y()[a]||null};H.ua=function(){return this.Y()[y]};H.Li=function(){for(var a=0,b=this;b[Ga]();)a++,b=b[Ga]();return a};H.Hb=function(){for(var a=this;a[Ga]();)a=a[Ga]();return a};H.contains=function(a){do a=a[Ga]();while(a&&a!=this);return Boolean(a)};
H.qc=function(a,b){if(!1!==a[D](b,this))for(var c=this.Y(),d=0;d<c[y];d++)c[d].qc(a,b)};H.Ye=Cb("C");H.ia=function(a){this.tc(a,this.i?this.i[y]:0)};H.tc=function(a,b){L(!a[Ga]());a.Ye(this);this.i=this.i||[];L(0<=b&&b<=this.i[y]);lc(this.i,b,0,a)};H.Sd=function(a){var b=this.i&&this.i[a];return b?(b.Ye(null),hc(this.i,a),0==this.i[y]&&(this.i=null),b):null};H.removeChild=function(a){return this.Sd(bc(this.Y(),a))};

function pe(){ne[D](this,"","");this.va=qe++}K(pe,ne);var qe=0;pe[z].ka=G("va");pe[z].Xe=Cb("va");
function re(a,b,c){pe[D](this);this.K=a;va(this,b);this.V=c;this.nd=he.ue().te(this.K.da(),this.V);this.Xa=!1;this.ac=b}K(re,pe);H=re[z];H.Eb=function(){var a=new re(this.K,this[x],this.V);a.kk(this.ac);a.Vd(this.Xa);a.Xe(this.ka());return a};H.xb=function(a){return null!=a?(a[v](this.K),a):[this.K]};H.Vd=Cb("Xa");H.kk=Cb("ac");
H.tf=function(){var a=!1;this[x]instanceof ee||(a="array"==Ib(this[x])?!this[x][wb](function(a){return a instanceof ee}):!0);if(!a)throw new P("SyntaxError","Value is not bounded");};H.eval=function(a){this.tf();if("in"==this.V)return this.Yh(a);var b=a[C][Ea](function(a){return this.nd(a.M(this.K),this[x])!=this.Xa},this);return new Vd(b,a.W())};
na(H,function(a){function b(b){if(a[y]<=b)throw new P("SyntaxError","Cannot bind to given array: out of range.");}if(this.ac instanceof ee){var c=this.ac.qb();b(c);va(this,a[c])}else"array"==Ib(this.ac)&&va(this,this.ac.map(function(c){return c instanceof ee?(b(c.qb()),a[c.qb()]):c}))});
H.Yh=function(a){L("in"==this.V,"ValuePredicate#evalAsIn_() called for wrong predicate type.");var b=new O(this[x]),c=J(function(a){return b[u](a)!=this.Xa},this),d=a[C][Ea](function(a){return c(a.M(this.K))},this);return new Vd(d,a.W())};f(H,function(){return"value_pred("+this.K.l()+" "+this.V+(this.Xa?"(complement)":"")+" "+this[x]+")"});H.Rf=function(){this.tf();return null!==this[x]&&("between"==this.V||"eq"==this.V||"gt"==this.V||"gte"==this.V||"lt"==this.V||"lte"==this.V)};
H.wk=function(){L(this.Rf(),"Could not convert predicate to key range.");var a=null;"between"==this.V?a=new Rd(this[x][0],this[x][1],!1,!1):"eq"==this.V?(a=this[x],a=new Rd(a,a,!1,!1)):a="gte"==this.V?new Rd(this[x],null,!1,!1):"gt"==this.V?new Rd(this[x],null,!0,!1):"lte"==this.V?new Rd(null,this[x],!1,!1):new Rd(null,this[x],!1,!0);return this.Xa?a.Gh():[a]};
function se(){this.Ac=this.ra=null}se[z].yd=function(a){null===this.ra&&null!=this.D&&(this.ra=te(this.D));a=this.ra.get(a,null);L(null!==a);return a};function te(a){var b=new N;a.qc(function(a){b.set(a.ka(),a)});return b}se[z].gd=function(a){a.D&&(this.D=a.D.Eb());this.Ac=a};na(se[z],function(){L(null==this.Ac);return this});se[z].fe=function(a){var b=this.D;null!=b&&b.qc(function(b){b instanceof re&&b[q](a)})};
function ue(){se[D](this)}K(ue,se);function ve(a){var b="";a[n](function(c,d){b+=c.K.l()+" ";b+=1==c.mb?"ASC":"DESC";d<a[y]-1&&(b+=", ")});return b}sa(ue[z],function(){var a=new ue;a.gd(this);this.h&&(a.h=this.h[w]());this.f&&(a.f=this.f[w]());a.oa=this.oa;a.ma=this.ma;this.J&&(a.J=this.J[w]());this.la&&(a.la=this.la[w]());this.Mb&&(a.Mb=this.Mb);this.Xb&&(a.Xb=this.Xb);return a});
na(ue[z],function(a){ue.eb[q][D](this,a);null!=this.Mb&&(this.oa=a[this.Mb.qb()]);null!=this.Xb&&(this.ma=a[this.Xb.qb()]);this.fe(a);return this});
function we(a){this.Ea=a}we[z].Hb=G("Ea");we[z].Af=Db("plan description");we[z].ca=function(){function a(c){var d=c.ca();d&&b.add(d);c.Y()[n](function(b){a(b)})}var b=new O;a(this.Ea);return b.c()};function xe(a){var b=new O;a[n](function(a){b[lb](a.ca())});return b};

function ye(a,b){this.global=a;this.vb=a.o(ud);this.Pd=b.map(function(a){return a[Da]});this.lg=b.map(function(a){return a.Qe});this.uf=xe(this.lg);this.Kg=this.Uh();this.Tb=Uc()}H=ye[z];H.Uh=function(){return this.Pd[wb](function(a){return!(a instanceof ue)})?1:0};
ha(H,function(){var a=new Pd(this[Ta],this.uf.c()),b=[],c=this.lg[w](),d=J(function(){var g=c[Ha]();if(g){var h=this.Pd[b[y]];return g.Hb()[Ia](a,h)[A](function(a){b[v](a[0]);return d()})}return Qc()},this);return d()[A](J(function(){return this.vb.Fb(this.Kg,a).U()},this))[A](J(function(){this.Ne(b);return b},this),J(function(b){a.Ab();throw b;},this))});H.da=G("Kg");H.ca=G("uf");H.Jc=G("Tb");H.ka=function(){return Ob(this)};H.Ne=Bb();
function Ae(a,b){ye[D](this,a,b);this.yb=a.o(zd)}K(Ae,ye);wa(Ae[z],Db(0));Ae[z].Ne=function(a){this.Pd[n](function(b,c){this.yb.Og(b,a[c])},this)};
function Be(a,b){this.m=a;this.yb=a.o(zd);this.Ra=a.o(yd);this.Ed=new Md(a);this.Cb=b;var c=a.o(Ad),d=this.Cb.map(function(a){return c[t](a[k]())});this.Sa=new O(d);this.Tb=Uc()}H=Be[z];ha(H,function(){this.Ed[zb](this.Cb);this.Xc();return Qc()});H.da=Db(1);H.ca=G("Sa");H.Jc=G("Tb");H.ka=function(){return Ob(this)};wa(H,Db(1));H.Xc=function(){var a=this.yb.Ae(this.Sa.c());0!=a[y]&&(a=new Ae(this.m,a),this.Ra.Ub(a))};
function Ce(a){this.m=a;this.vb=a.o(ud);this.Ra=a.o(yd)}Ce[z].sk=function(){this.vb.subscribe(this.Me[q](this))};Ce[z].Me=function(a){a=new Be(this.m,a);this.Ra.Ub(a)};


function Q(a,b){this.Ma=a;this.j=b;this.fb=new N}I("lf.backstore.FirebaseRawBackStore",Q,void 0);H=Q[z];H.zd=G("j");H.Ad=function(){throw new P("NotSupportedError","Firebase does not have raw transaction.");};function De(a,b){var c=Uc(),d=a;b[y]&&(d=a[gb](b));d[db]("value",function(a){c[vb](a.val())},function(a){c[jb](a)});return c.ga}function Ee(a,b,c){function d(a){a?g[jb](a):g[vb]()}c=c||!1;var g=Uc();c?a.set(b,d):a[zb](b,d);return g.ga}
H.Ba=function(a){return De(this.j,"@rev/R")[A](function(a){this.Qa=a;return De(this.j,"@table")}[q](this))[A](function(b){var c=0,d;for(d in b)this.fb.set(d,b[d]),b[d]>c&&(c=b[d]);a.gb()[n](function(a){this.fb.s(a[k]())||(b[a[k]()]=++c)},this);d=this.j[gb]("@table");return Ee(d,b)}[q](this))};
H.Xd=function(a,b){var c=this.fb.get(a);return null!=c?function(){var a={},g=Uc();this.j[Ma]("T").equalTo(c)[db]("value",function(c){c[n](function(c){var g=b(c.val());a[ga(c.key(),10)]=g});g[vb](a)});return g.ga}[D](this)[A](function(a){a["@rev"]={R:++this.Qa};return Ee(this.j,a)}[q](this)):Qc()};H.Dc=function(a){return this.Xd(a,Db(null))[A](function(){this.fb[m](a);return Ee(this.j[gb]("@table/"+a),null,!0)}[q](this))};Q[z].dropTable=Q[z].Dc;
Q[z].uc=function(a,b,c){return this.Xd(a,function(a){var g=a.P;g[b]=c;return{R:this.Qa+1,T:a.T,P:g}}[q](this))};Q[z].addTableColumn=Q[z].uc;Q[z].Ec=function(a,b){return this.Xd(a,function(a){var d=a.P;delete d[b];return{R:this.Qa+1,T:a.T,P:d}}[q](this))};Q[z].dropTableColumn=Q[z].Ec;Q[z].Wc=function(a,b,c){return this.Xd(a,function(a){var g=a.P;g[c]=g[b];delete g[b];return{R:this.Qa+1,T:a.T,P:g}}[q](this))};Q[z].renameTableColumn=Q[z].Wc;
Q[z].wb=function(){throw new P("NotSupportedError","Firebase does not have raw transaction.");};Q[z].createRow=Q[z].wb;Q[z].Mc=G("Ma");Q[z].getVersion=Q[z].Mc;Q[z].ec=function(a){var b=Uc();a=this.fb.get(a);this.j[Ma]("T").equalTo(a)[db]("value",function(a){var d=[];a[n](function(a){d[v](a.val().P)});b[vb](d)});return b.ga};pa(Q[z],function(){var a={},b=this.fb.G().map(function(b){return this.ec(b)[A](function(d){a[b]=d})}[q](this));return Sc(b)[A](function(){return a})});pa(Q[z],Q[z].dump);
function Fe(a,b,c){gd[D](this,c,b);this.j=a}K(Fe,gd);Fe[z].Z=function(a){return this.j.Kc(a)};
Fe[z].U=function(){Fe.eb.U[D](this);var a=this.Pi().Ef();if(0==a.na())this.ba[vb]();else{var b=this.j.Yi()+1;this.j.zg(b);var c={"@rev":{R:b}};a[n](function(a){var g=this.j.Jf(a[k]());a.qd()[n](function(a,d){c[d]={R:b,T:g,P:a.w()}});a.wd()[n](function(a,d){c[d]={R:b,T:g,P:a[1].w()}});a.rd()[n](function(a,b){c[b]=null})},this);this.j.Wi()[zb](c,function(c){if(null===c)this.ba[vb]();else this.j.zg(b-1),c=a.c().map(function(a){return this.j.qg(a[k]())},this),Sc(c)[A](this.ba[jb][q](this.ba),this.ba[jb][q](this.ba))}[q](this))}return this.ba.ga};
function Ge(){this.ob=new N}H=Ge[z];H.ze=function(a){if(0==a[y])return this.ob.c();var b=[];a[n](function(a){a=this.ob.get(a,null);null===a||b[v](a)},this);return b};H.getData=G("ob");H.get=function(a){return Qc(this.ze(a))};H.Re=function(a){a[n](function(a){this.ob.set(a.id(),a)},this)};H.put=function(a){this.Re(a);return Qc()};H.rg=function(a){0==a[y]||a[y]==this.ob.na()?this.ob[Pa]():a[n](function(a){this.ob[m](a)},this)};ja(H,function(a){this.rg(a);return Qc()});
H.Qi=function(){return this.ob.Ha()?0:this.ob.G()[kb](function(a,b){return a>b?a:b},0)};
function He(a,b){this.A=a;this.Zg=b;this.Vc=new N;this.Qa=-1;this.I=new N;this.fb=new N;this.ge=null}H=He[z];H.Yi=G("Qa");H.zg=Cb("Qa");
H.Ba=function(a){this.j=this.Zg[gb](this.A[rb]());var b=a||function(){return Qc()};return De(this.j,"@db/version")[A](function(a){return null===a?Ee(this.j,this.Lh(),!0)[A](function(){var a=new Q(0,this.j);return b(a)}[q](this)):a==this.A[Fa]()?De(this.j,"@rev/R")[A](function(a){this.Qa=a;return De(this.j,"@table")}[q](this))[A](function(a){for(var b in a)this.fb.set(b,a[b]);a=this.A.gb().map(function(a){return this.qg(a[k]())},this);return Sc(a)}[q](this))[A](function(){this.pj();this.bg();return Qc()}[q](this)):
this.Oe(a,b)[A](function(){return this.Ba()}[q](this))}[q](this))};H.Oe=function(a,b){var c=new Q(a,this.j);return c.Ba(this.A)[A](function(){return this.Ak()}[q](this))[A](function(){return b(c)})[A](function(){var a=this.j[gb]("@db");return Ee(a,{version:this.A[Fa]()},!0)}[q](this))};H.Ak=function(){return Qc()};H.bg=function(){this.j.off();this.j.on("child_removed",this.Kj[q](this));this.he&&(this.he.off(),this.Vc[Pa]());this.he=this.j[Ma]("R").startAt(this.Qa+1);this.he.on("value",this.Me[q](this))};
H.pj=function(){$c=this.I.c().map(function(a){return a.Qi()})[kb](function(a,b){return a>b?a:b},0)+1};H.Kj=function(a){var b=a.val(),c=this.Vc.get(b.T,null);null===c&&(c=new O,this.Vc.set(b.T,c));c.add(ga(a.key(),10))};H.Me=function(a){var b=a[gb]("@rev/R").val();null!=b&&b!=this.Qa&&(this.Qa=b,a=this.yi(a),a[n](function(a){var b=this.I.get(a[k]()),g=a.rd().G();g[y]&&b.rg(g);var h=a.qd().c();a.wd()[n](function(a){h[v](a[1])});b.Re(h)},this),a[y]&&this.Sc(a),this.bg())};
H.yi=function(a){var b=new O,c=new N;this.fb[n](function(a,g){var h=this.I.get(g),l=new Od(g);if(this.Vc.s(a)){var p=this.Vc.get(a).c();b[lb](p);h.ze(p)[n](function(a){l[qb](a)})}c.set(a,l)}[q](this));a[n](function(a){if("@rev"!=a.key()){var g=ga(a.key(),10);if(!b[u](g)){a=a.val();var h=c.get(a.T),l=this.I.get(h[k]());l.getData().s(g)?h.modify([l.ze([g])[0],new Zc(g,a.P)]):h.add(new Zc(g,a.P))}}}[q](this));return c.c()[Ea](function(a){return!a.Ha()})};
H.qg=function(a){var b=Uc(),c=this.Jf(a);this.j[Ma]("T").equalTo(c)[db]("value",function(c){var g=new Ge,h=[];c[n](function(a){h[v](new Zc(ga(a.key(),10),a.val().P))});g.Re(h);this.I.set(a,g);b[vb]()}[q](this));return b.ga};H.Jf=function(a){return this.fb.get(a)};H.Lh=function(){var a={};a["@db"]={version:this.A[Fa]()};a["@rev"]={R:1};this.Qa=1;a["@table"]={};this.A.gb()[n](function(b,c){var d=b[k]();a["@table"][d]=c;this.I.set(d,new Ge);this.fb.set(d,c)},this);return a};
H.Fb=function(a,b){return new Fe(this,a,b)};H.Kc=function(a){var b=this.I.get(a,null);if(null!==b)return b;throw new P("DataError","Table "+a+" not found");};H.Wi=G("j");ra(H,Bb());ya(H,Cb("ge"));H.Sc=function(a){null!=this.ge&&this.ge(a)};
function R(a,b,c,d){this.j=b;this.La=c;this.Ma=a;this.cd=d}I("lf.backstore.IndexedDBRawBackStore",R,void 0);R[z].zd=G("j");R[z].getRawDBInstance=R[z].zd;R[z].Ad=G("La");R[z].getRawTransaction=R[z].Ad;R[z].Dc=function(a){return new M(function(b,c){try{this.j.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};R[z].dropTable=R[z].Dc;
R[z].Oj=function(a,b,c){return new M(function(d,g){var h;try{var l=this.La[nb](a);h=l[tb]()}catch(p){g(p);return}Ba(h,function(){var a=h[Xa];a?(b(a),a[Sa]()):(c(l),d())});ua(h,g)},this)};function Ie(a){var b=null;return b=a instanceof ArrayBuffer?cd(a):a instanceof Date?a[Qa]():a}R[z].af=function(a,b){function c(a){var c=Hd(a[x]),d=c.jc(),p;for(p in d){var B=ad(d[p]);b(B);d[p]=B.Fa()}a[zb](c.Fa())}function d(a){var c=ad(a[x]);b(c);a[zb](c.Fa())}return this.Oj(a,this.cd?c:d,Bb())};
R[z].uc=function(a,b,c){var d=Ie(c);return this.af(a,function(a){a.w()[b]=d})};R[z].addTableColumn=R[z].uc;R[z].Ec=function(a,b){return this.af(a,function(a){delete a.w()[b]})};R[z].dropTableColumn=R[z].Ec;R[z].Wc=function(a,b,c){return this.af(a,function(a){a.w()[c]=a.w()[b];delete a.w()[b]})};R[z].renameTableColumn=R[z].Wc;
R[z].bj=function(a){var b=[];return new M(function(c,d){var g;try{g=this.La[nb](a)[tb]()}catch(h){d(h);return}Ba(g,J(function(){var a=g[Xa];if(a){if(this.cd){var d=Hd(a[x]).jc(),h;for(h in d)b[v](d[h])}else b[v](a[x]);a[Sa]()}else c(b)},this));ua(g,d)},this)};R[z].wb=function(a){var b={};sc(a,J(function(a,d){b[d]=Ie(a)},this));return bd(b)};R[z].createRow=R[z].wb;R[z].Mc=G("Ma");R[z].getVersion=R[z].Mc;
pa(R[z],function(){for(var a=this.j[La],b=[],c=0;c<a[y];++c){var d=a[mb](c);b[v](this.ec(d))}return Sc(b)[A](function(b){var c={};b[n](function(b,d){c[a[mb](d)]=b});return c})});pa(R[z],R[z].dump);R[z].ec=function(a){return this.bj(a)[A](function(a){return a.map(function(a){return a[x]})})};
function Je(a,b){this.O=a;this.Gb=b}H=Je[z];H.get=function(a){if(0==a[y])return this.se();a=a.map(function(a){return new M(function(c,d){var g;try{g=this.O.get(a)}catch(h){d(h);return}ua(g,d);Ba(g,J(function(a){c(this.Gb(a[ub][Xa]))},this))},this)},this);return Sc(a)};H.se=function(){return new M(function(a,b){var c=[],d;try{d=this.O[tb]()}catch(g){b(g);return}ua(d,b);Ba(d,J(function(){var b=d[Xa];b?(c[v](this.Gb(b[x])),b[Sa]()):a(c)},this))},this)};
H.Qb=function(a){return new M(function(b,c){var d;try{d=a()}catch(g){c(g);return}Ba(d,b);ua(d,c)},this)};H.put=function(a){if(0==a[y])return Qc();a=a.map(function(a){return this.Qb(J(function(){return this.O.put(a.Fa())},this))},this);return Sc(a)};
ja(H,function(a){return new M(function(b,c){var d=this.O.count();Ba(d,J(function(d){if(0==a[y]||d[ub][Xa]==a[y])return this.Qb(J(function(){return this.O[Pa]()},this))[A](b,c);d=a.map(function(a){return this.Qb(J(function(){return this.O[qb](a)},this))},this);Sc(d)[A](b,c)},this));ua(d,c)},this)});
function Ke(a,b,c,d,g){gd[D](this,c,d);this.m=a;this.La=b;this.cd=g;this.La.oncomplete=J(this.ba[vb],this.ba);this.La.onabort=J(this.ba[jb],this.ba)}K(Ke,gd);Ke[z].Z=function(a,b,c){return this.cd?(c=null!=c?c:0,a=this.La[nb](a),new Id(a,b,0==c?Tb(Jd,this.m):Kd)):new Je(this.La[nb](a),b)};
function Le(a,b){this.m=a;this.A=b;this.dd=b.mg().Wh||!1}H=Le[z];
H.Ba=function(a){var b=aa.indexedDB||aa.mozIndexedDB||aa.webkitIndexedDB||aa.msIndexedDB;if(null==b)throw new P("NotSupportedError","IndexedDB not supported by platform.");var c=a||function(){return Qc()};return new M(function(a,g){var h;try{h=b.open(this.A[rb](),this.A[Fa]())}catch(l){g(l);return}ua(h,g);h.onupgradeneeded=J(function(a){this.Nj(c,a)[A](Bb(),g)},this);Ba(h,J(function(b){this.j=b[ub][Xa];this.Ve()[A](J(function(b){$c=b+1;a(this.j)},this))},this))},this)};
H.Nj=function(a,b){var c=b[ub][Xa],d=b[ub][fb],g=new R(b.oldVersion,c,d,this.dd);this.ck(c,d);this.Ph(c,d);return a(g)};H.ck=function(a){for(var b=[],c=0;c<a[La][y];++c){var d=a[La][mb](c);-1!=d[ob](".")&&b[v](d)}b[n](function(b){try{a.deleteObjectStore(b)}catch(c){}})};H.Ph=function(a,b){this.A.gb()[n](Tb(this.Mh,a,b),this)};H.Mh=function(a,b,c){a[La][u](c[k]())||a.createObjectStore(c[k](),{keyPath:"id"});c.Rb()&&(c.Ga()[n](function(c){this.Cc(a,b,c.l(),"btree")},this),this.Cc(a,b,c.Ib(),"rowid"))};
H.Cc=function(a,b,c,d){a[La][u](c)||(a.createObjectStore(c,{keyPath:"id"}),a=b[nb](c),(this.dd?new Id(a,ad,Kd):new Je(a,ad)).put([new ed(new dd(d))]))};H.Fb=function(a,b){var c=b.ca().c().map(function(a){return a[k]()});b.Ni()[n](function(a){c[v](a)});var d=this.j[fb](c,0==a?"readonly":"readwrite");return new Ke(this.m,d,b,a,this.dd)};
H.Ve=function(a){function b(){if(0==c[y])return Qc();var a=c[Ha]();return l(a)[A](b)}var c=this.A.gb().map(function(a){return a[k]()}),d=this.j,g=0,h=J(function(a){return this.dd?(a=Hd(a[x]),vc(a.jc())[kb](function(a,b){return ea.max(a,b)},0)):a.key},this),l=J(function(b){return new M(function(c,l){var ze;try{ze=(a||d[fb]([b]))[nb](b)[tb](null,"prev")}catch(bh){l(bh);return}Ba(ze,function(a){(a=a[ub][Xa])&&(g=ea.max(g,h(a)));c(g)});ua(ze,function(){c(g)})},this)},this);return new M(function(a){b()[A](function(){a(g)})})};
ra(H,function(){this.j[cb]()});H.Kc=function(){throw new P("SyntaxError","IndexedDB tables needs to be acquired from transactions");};ya(H,Bb());H.Sc=Bb();



function Me(a,b,c){gd[D](this,c,b);this.O=a;0==b&&this.ba[vb]()}K(Me,gd);Me[z].Z=function(a){return this.O.Kc(a)};Me[z].U=function(){Me.eb.U[D](this);this.ba[vb]();return this.ba.ga};
function Ne(a){this.A=a;this.I=new N}H=Ne[z];H.Ba=function(){this.A.gb()[n](this.qj,this);return Qc()};H.Kc=function(a){var b=this.I.get(a,null);if(null===b)throw new P("DataError","Table "+a+" does not exist.");return b};H.Fb=function(a,b){return new Me(this,a,b)};H.vf=function(a){if(!this.I.s(a)){var b=new Ge;this.I.set(a,b);return b}return null};H.qj=function(a){this.vf(a[k]());a.Rb()&&(a.Ga()[n](function(a){this.Cc(a.l(),"btree")},this),this.Cc(a.Ib(),"rowid"))};
H.Cc=function(a,b){var c=this.vf(a);null===c||c.put([new ed(new dd(b))])};ra(H,Bb());ya(H,Bb());H.Sc=Bb();
function Oe(a){Ne[D](this,a);this.Kd=null}K(Oe,Ne);ya(Oe[z],function(a){null===this.Kd&&(this.Kd=a)});Oe[z].Sc=function(a){null===this.Kd||this.Kd(a)};
function Pe(a,b,c){this.La=a;this.B=b;this.Gb=c}Pe[z].get=function(a){var b=this.Gb;this.La.Ja("SELECT id, value FROM "+this.B+" "+(0==a[y]?"":"WHERE id IN ("+a[F](",")+")"),[],function(a){for(var d=a[hb][y],g=e(d),h=0;h<d;++h)g[h]=b({id:a[hb][mb](h).id,value:JSON.parse(a[hb][mb](h)[x])});return g});return this.La.U()};
Pe[z].put=function(a){if(0==a[y])return Qc();var b="INSERT OR REPLACE INTO "+this.B+"(id, value) VALUES (?, ?)";a[n](function(a){this.La.Ja(b,[a.id(),JSON.stringify(a.w())])},this);return Qc()};ja(Pe[z],function(a){this.La.Ja("DELETE FROM "+this.B+" "+(0==a[y]?"":"WHERE id IN ("+a[F](",")+")"),[]);return Qc()});
function Qe(a,b,c){gd[D](this,b,c);this.j=a;this.I=new N;this.ke=[]}K(Qe,gd);Qe[z].Z=function(a,b){var c=this.I.get(a,null);null===c&&(c=new Pe(this,a,b),this.I.set(a,c));return c};Qe[z].Ja=function(a,b,c){this.ke[v]({tk:a,Pj:b,transform:c})};
Qe[z].U=function(){Qe.eb.U[D](this);var a,b,c=this.ba[jb][q](this.ba),d=function(a,b){this.ba[jb](b)}[q](this),g=J(function(c,l){a=l;if(this.ke[y]){var p=this.ke[Ha]();b=p.transform;c.executeSql(p.tk,p.Pj,g,d)}else p=a,null!=b&&null!=a&&(p=b(a)),this.ba[vb](p)},this);0==this.Jg?this.j.readTransaction(g,c):this.j[fb](g,c);return this.ba.ga};
function S(a,b,c){this.j=c;this.m=a;this.Ma=b}I("lf.backstore.WebSqlRawBackStore",S,void 0);S[z].zd=G("j");S[z].getRawDBInstance=S[z].zd;S[z].Ad=function(){throw new P("NotSupportedError","Use the raw instance to create transaction instead.");};S[z].getRawTransaction=S[z].Ad;S[z].md=function(){return new Qe(this.j,new Pd(this.m,[]),1)};S[z].Dc=function(a){var b=this.md();b.Ja("DROP TABLE "+a,[]);return b.U()};S[z].dropTable=S[z].Dc;
S[z].ec=function(a){var b=this.md();b.Ja("SELECT id, value FROM "+a,[]);return b.U()[A](function(a){for(var b=a[hb][y],g=e(b),h=0;h<b;++h)g[h]={id:a[hb][mb](h).id,value:JSON.parse(a[hb][mb](h)[x])};return Qc(g)})};S[z].$e=function(a,b){var c=this.md(),d="UPDATE "+a+" SET value=? WHERE id=?";return this.ec(a)[A](function(a){a[n](function(a){a=b(a);c.Ja(d,[JSON.stringify(a[x]),a.id])});return c.U()})};S[z].uc=function(a,b,c){var d=Ie(c);return this.$e(a,function(a){a[x][b]=d;return a})};
S[z].addTableColumn=S[z].uc;S[z].Ec=function(a,b){return this.$e(a,function(a){delete a[x][b];return a})};S[z].dropTableColumn=S[z].Ec;S[z].Wc=function(a,b,c){return this.$e(a,function(a){a[x][c]=a[x][b];delete a[x][b];return a})};S[z].renameTableColumn=S[z].Wc;S[z].wb=function(a){var b={},c;for(c in a)b[c]=Ie(a[c]);return bd(b)};S[z].createRow=S[z].wb;S[z].Mc=G("Ma");S[z].getVersion=S[z].Mc;
function Re(a){a.Ja('SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=e(a[hb][y]),d=0;d<c[y];++d)c[d]=a[hb][mb](d).tbl_name;return c})}pa(S[z],function(){var a=Uc(),b=this.md();Re(b);var c={};b.U()[A](J(function(b){b=b[Ea](function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.ec(a)[A](function(b){c[a]=b})},this);Sc(b)[A](function(){a[vb](c)})},this));return a.ga});pa(S[z],S[z].dump);
function Se(a,b,c){this.m=a;this.A=b;this.pk=c||4194304}H=Se[z];H.sd=function(){return new Pd(this.m,[])};H.Ba=function(a){if(null==aa.openDatabase)throw new P("NotSupportedError","WebSql not supported by platform.");var b=a||function(){return Qc()};return new M(J(function(a,d){try{var g=aa.openDatabase(this.A[rb](),"",this.A[rb](),this.pk);if(null!=g)this.j=g,this.Ch(b)[A](a,d);else throw new P("NotSupportedError","Unable to open database.");}catch(h){d(h)}},this))};
H.Ch=function(a){var b=Uc(),c=new Qe(this.j,this.sd(),1);c.Ja("CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);c.Ja("SELECT v FROM __lf_ver WHERE id = 0",[]);c.U()[A](J(function(c){var g=0;c[hb][y]&&(g=c[hb][mb](0).v);g<this.A[Fa]()?this.Oe(a,g)[A](b[vb][q](b)):g>this.A[Fa]()?b[jb](new P("DataError","Attempt to open a newer database with old code")):b[vb]()},this));return b.ga};
H.Fb=function(a,b){if(null!=this.j)return new Qe(this.j,b,a);throw new P("DataError","Attempt to create transaction from uninitialized DB");};ra(H,Bb());H.Kc=function(){throw new P("SyntaxError","WebSQL tables needs to be acquired from transactions");};H.eg=function(){throw new P("NotSupportedError","WebSQL does not support change notification");};ya(H,function(){this.eg()});H.Sc=function(){this.eg()};
H.Oe=function(a,b){var c=Uc();this.Sj()[A](J(function(){a(new S(this.m,b,this.j))[A](J(function(){return this.Ve()},this))[A](c[vb][q](c))},this),c[jb][q](c));return c.ga};
H.Sj=function(){var a=this.A.gb(),b=new Qe(this.j,this.sd(),1),c=new Qe(this.j,this.sd(),1);b.Ja("INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[this.A[Fa]()]);Re(b);return b.U()[A](function(b){b[Ea](function(a){return-1!=a[ob](".")})[n](function(a){c.Ja("DROP TABLE "+a,[])});var g=b[Ea](function(a){return-1==a[ob](".")});a.map(function(a){return a[k]()})[Ea](function(a){return-1==g[ob](a)})[n](function(a){c.Ja("CREATE TABLE "+a+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return c.U()})};
H.Ve=function(){var a=0,b=Uc(),c=J(function(b){var c=new Qe(this.j,this.sd(),0);c.Ja("SELECT MAX(id) FROM "+b,[]);return c.U()[A](function(b){b=b[hb][mb](0)[0];a=ea.max(b,a)})},this),d=this.A.gb().map(function(a){return c(a[k]())});Sc(d)[A](function(){b[vb](a)},function(a){b[jb](a)});return b.ga};

function Te(){this.g=new N;ba.defineProperty(this,"size",{get:function(){return this.g.na()}})}ma(Te[z],function(){this.g[Pa]()});ma(Te[z],Te[z][Pa]);xa(Te[z],function(a){return this.g[m](a)});Te[z]["delete"]=Te[z][qb];ka(Te[z],function(a,b){return this.g[n](a,b)});ka(Te[z],Te[z][n]);Te[z].get=function(a){return this.g.get(a)};Te[z].get=Te[z].get;Te[z].has=function(a){return this.g.s(a)};Te[z].has=Te[z].has;Te[z].set=function(a,b){return this.g.set(a,b)};Te[z].set=Te[z].set;
var Ue=aa.Map&&aa.Map[z][Oa]&&aa.Map[z][n]?aa.Map:Te;
function Ve(){this.Vb=new O;ba.defineProperty(this,"size",{get:function(){return this.Vb.na()}})}Ve[z].add=function(a){this.Vb.add(a)};Ve[z].add=Ve[z].add;ma(Ve[z],function(){this.Vb[Pa]()});ma(Ve[z],Ve[z][Pa]);xa(Ve[z],function(a){return this.Vb[m](a)});Ve[z]["delete"]=Ve[z][qb];ka(Ve[z],function(a,b){this.Vb.c()[n](a,b)});Ve[z].has=function(a){return this.Vb[u](a)};Ve[z].has=Ve[z].has;var We=aa.Set&&aa.Set[z][Oa]&&aa.Set[z][n]?aa.Set:Ve;
function Xe(a){if(a instanceof Ve)return a.Vb.c();var b=0,c=e(a[Ya]);a[n](function(a){c[b++]=a});return c};
function Ye(){this.g=new Ue;this.Fg=new Ue}H=Ye[z];H.Bd=function(a){var b=this.Fg.get(a);Fb(b)||(b=new We,this.Fg.set(a,b));return b};H.set=function(a,b){var c=this.Bd(a);b[n](J(function(a){this.g.set(a.id(),a);c.add(a.id())},this))};H.get=function(a){return a.map(J(function(a){return this.g.get(a)||null},this))};
H.Va=function(a,b,c){var d=[],g=ea.min(b,c),h=ea.max(b,c);a=this.Bd(a);if(a[Ya]<h-g)a[n](function(a){a>=g&&a<=h&&(a=this.g.get(a),L(null!=a,"Inconsistent cache"),d[v](a))},this);else for(b=g;b<=h;++b)a.has(b)&&(c=this.g.get(b),L(null!=c,"Inconsistent cache"),d[v](c));return d};ja(H,function(a,b){var c=this.Bd(a);b[n](function(a){this.g[qb](a);c[qb](a)},this)});H.na=function(a){return null!=a?this.Bd(a)[Ya]:this.g[Ya]};
function Ze(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=ea.min(Fb(c)?c:a[y],a[y]);if(0==c)return[];d=ea.min(d||0,a[y]);return a[w](d,d+c)};
function $e(a,b,c,d){this.B=a;this.L=b;this.cf=c;if(d){a=511;a*=a*a;if(d[y]>=a)throw new P("TooManyRowsError","B-Tree implementation supports at most "+a+" rows.");d=af(this,d);this.sa=d=bf(d)}else this[Pa]()}var cf=[];H=$e[z];ia(H,G("B"));f(H,function(){return this.sa[r]()});H.add=function(a,b){this.sa=this.sa.sb(a,b)};H.set=function(a,b){this.sa=this.sa.sb(a,b,!0)};ja(H,function(a,b){this.sa=this.sa[m](a,b)});H.get=function(a){return this.sa.get(a)};
H.ld=function(a){return null!=a?this.Va([a])[y]:this.Va()[y]};H.Va=function(a,b,c,d){var g=this.sa.vd().b[0];if(!Fb(g)||0==c)return cf;var h=(c||0)+(d||0),h=0<h&&!b?h:Number.POSITIVE_INFINITY,l=[];(Fb(a)?this.L.Cg(a):[this.L.re()])[n](function(a){for(var b=this.L.Qd(a),b=this.L.Fe(a)?g:b[0],b=this.sa.Df(b),c=0;null!=b&&l[y]<h;)0!=b.Va(a,l)?c=0:c++,b=2==c?null:b[$a]()},this);return Ze(l,b,c,d)};ma(H,function(){this.sa=df(this)});H.s=function(a){return this.sa.s(a)};
H.min=function(){return this.Rc(J(this.L.min,this.L))};H.max=function(){return this.Rc(J(this.L.max,this.L))};H.Rc=function(a){var b=this.sa.vd(),c=this.sa.If();if(0==b.b[y]&&0==c.b[y])return[null,null];var d=b.b[0],b=b.S[0],g=c.b[c.b[y]-1],c=c.S[c.b[y]-1];return 1==a(d,g)?[d,this.cf?[b]:b]:[g,this.cf?[c]:c]};H.Oc=G("cf");H.Bc=G("L");H.Ke=function(a,b){return null!=a?-1==this.L[Wa](a,b):!1};H.Na=function(a,b){return null!=a?0==this.L[Wa](a,b):!1};
H.Fa=function(){for(var a=[],b=this.sa.vd();b;)a[v](new Zc(b.va,[b.b,b.S])),b=b.xa;return a};function ef(a,b,c,d){a=new $e(b,a,c);d=ff(d,a);a.sa=d;return a}function gf(a,b){this.va=a;this.X=b;this.lb=0;this.xa=this.tb=this.C=null;this.b=[];this.S=[];this.i=[]}function df(a){return new gf($c++,a)}H=gf[z];H.ea=function(){return 0==this.lb};H.Vf=function(){return null==this.C};qa(H,G("xa"));
function hf(a){function b(a){return null!=a?a.va[r]():"_"}var c=a.va+"["+a.b[F]("|")+"]",d=a.i.map(function(a){return a.va})[F]("|"),g=a.S[F]("/"),h=b(a.tb)+"{",h=a.ea()?h+g:h+d,h=h+"}"+b(a.C);a.xa&&(a=hf(a.xa),c=c+"  "+a[0],h=h+"  "+a[1]);return[c,h]}f(H,function(){var a="",b=hf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.i[y]&&(a+=this.i[0][r]());return a});H.vd=function(){return this.ea()?this:this.i[0].vd()};H.If=function(){return this.ea()?this:this.i[this.i[y]-1].If()};
function jf(a,b){b&&(b.tb=a);a&&(a.xa=b)}function af(a,b){for(var c=b[y],d=0,g=df(a),h=g;0<c;){var l=768<=c?511:257<=c&&511>=c?c:257,p=b[w](d,d+l);g.b=p.map(function(a){return a.key});g.S=p.map(function(a){return a[x]});d+=l;c-=l;0<c&&(l=df(g.X),jf(g,l),g=l)}return h}function kf(a){var b=a[0],c=df(b.X);c.lb=b.lb+1;c.i=a;for(b=0;b<a[y];++b)a[b].C=c,0<b&&c.b[v](a[b].b[0]);return c}
function bf(a){var b=a,c=[];do c[v](b),b=b.xa;while(b);if(512>=c[y])b=kf(c);else{var d=c[y],g=0,b=df(a.X);for(b.lb=a.lb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var h=c[w](g,g+a),l=kf(h);l.C=b;b.i[y]&&(b.b[v](h[0].b[0]),jf(b.i[b.i[y]-1],l));b.i[v](l);g+=a;d-=a}}return b}H.get=function(a){var b=this.Yc(a);if(this.ea()){var c=cf;this.X.Na(this.b[b],a)&&(c=c[Ka](this.S[b]));return c}b=this.X.Na(this.b[b],a)?b+1:b;return this.i[b].get(a)};
H.s=function(a){var b=this.Yc(a);return this.X.Na(this.b[b],a)?!0:this.ea()?!1:this.i[b].s(a)};ja(H,function(a,b){this.yf(a,-1,b);if(this.Vf()){var c=this;1==this.i[y]&&(c=this.i[0],c.C=null);return c}return this});function mf(a){return a.ea()?a.b[0]:mf(a.i[0])}H.od=function(){this.b=[];for(var a=1;a<this.i[y];++a)this.b[v](mf(this.i[a]))};
H.yf=function(a,b,c){var d=this.Yc(a);if(!this.ea()){var g=this.X.Na(this.b[d],a)?d+1:d;if(this.i[g].yf(a,g,c))this.od();else return!1}else if(!this.X.Na(this.b[d],a))return!1;if(this.b[y]>d&&this.X.Na(this.b[d],a)){if(Fb(c)&&!this.X.Oc()&&this.ea()&&(a=this.S[d],c=nc(a,oc,!1,c),0<=c&&hc(a,c),this.S[d][y]))return!1;this.b[E](d,1);this.ea()&&this.S[E](d,1)}256>this.b[y]&&!this.Vf()&&(this.uk()||this.Gj(b));return!0};
H.uk=function(){var a=null,b,c,d;if(this.xa&&256<this.xa.b[y])a=this.xa,c=b=0,d=this.b[y]+1;else if(this.tb&&256<this.tb.b[y])a=this.tb,b=this.tb.b[y]-1,c=this.ea()?b:b+1,d=0;else return!1;this.b[E](d,0,a.b[b]);a.b[E](b,1);b=this.ea()?this.S:this.i;var g=null;this.ea()?g=a.S:(g=a.i,g[c].C=this);b[E](d,0,g[c]);g[E](c,1);a.ea()||(a.od(),this.od());return!0};
H.Gj=function(a){var b,c,d;this.xa&&511>this.xa.b[y]?(b=this.xa,d=c=0):this.tb&&(b=this.tb,c=b.b[y],d=b.ea()?b.S[y]:b.i[y]);c=[c,0][Ka](this.b);e[z][E][ib](b.b,c);c=null;this.ea()?c=this.S:(c=this.i,c[n](function(a){a.C=b}));c=[d,0][Ka](c);e[z][E][ib](b.ea()?b.S:b.i,c);jf(this.tb,this.xa);b.ea()||b.od();-1!=a&&(this.C.b[E](a,1),this.C.i[E](a,1))};
H.sb=function(a,b,c){var d=this.Yc(a);if(this.ea()){if(this.X.Na(this.b[d],a)){if(c)return this.S[d]=this.X.Oc()?b:[b],this;if(this.X.Oc())throw new P("ConstraintError","Duplicate key not allowed");if(this.S[d])return pc(this.S[d],b),this;this.S[d]=[b]}this.b[E](d,0,a);this.S[E](d,0,this.X.Oc()?b:[b]);return 512==this.b[y]?this.rk():this}d=this.X.Na(this.b[d],a)?d+1:d;a=this.i[d].sb(a,b,c);a.ea()||1!=a.b[y]||(this.b[E](d,0,a.b[0]),a.i[1].C=this,a.i[0].C=this,this.i[E](d,1,a.i[1]),this.i[E](d,0,a.i[0]));
return 512==this.b[y]?this.qk():this};H.rk=function(){var a=df(this.X),b=df(this.X);b.lb=1;b.b=[this.b[256]];b.i=[this,a];b.C=this.C;this.C=b;a.b=this.b[E](256);a.S=this.S[E](256);a.C=b;jf(a,this.xa);jf(this,a);return b};H.qk=function(){var a=df(this.X),b=df(this.X);a.C=this.C;a.lb=this.lb+1;a.b=[this.b[256]];a.i=[this,b];this.b[E](256,1);b.C=a;b.lb=this.lb;b.b=this.b[E](256);b.i=this.i[E](257);b.i[n](function(a){a.C=b});this.C=a;jf(b,this.xa);jf(this,b);return a};
H.Yc=function(a){for(var b=0,c=this.b[y];b<c;){var d=b+c>>1;this.X.Ke(this.b[d],a)?b=d+1:c=d}return b};H.Df=function(a){if(!this.ea()){var b=this.Yc(a);this.X.Na(this.b[b],a)&&b++;return this.i[b].Df(a)}return this};
H.Va=function(a,b){var c=-1,d=this.b[y]-1,g=this.X.Bc(),h=J(function(b){for(;b<this.b[y];++b){var h=g.kc(this.b[b],a);if(-1!=c){if(!h){d=b-1;break}}else h&&(c=b)}},this);g.kc(this.b[0],a)?c=0:h(1);if(-1==c)return 0;g.kc(this.b[d],a)||h(c);return d==this.b[y]-1?this.lf(b,this.S[w](c)):d>=c?this.lf(b,this.S[w](c,d+1)):0};H.lf=function(a,b){var c=this.X.Oc()?b:rc(b);a[v][ib](a,c);return c[y]};
function ff(a,b){for(var c=a.map(function(a){var c=new gf(a.id(),b);c.b=a.w()[0];c.S=a.w()[1];return c}),d=0;d<c[y]-1;++d)jf(c[d],c[d+1]);return 1<c[y]?bf(c[0]):c[0]};
function nf(a){if(1==a.h[y])return new of(a.h[0].mb);a=a.h.map(function(a){return a.mb});return new pf(a)}function of(a){this.hd=0==a?qf:rf;this.Le=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.ig=0==a?sf:tf}K(of,Ld);function rf(a,b){return a>b?1:a<b?-1:0}function qf(a,b){return rf(b,a)}function tf(a,b){return Ud(a,b)}function sf(a,b){return Ud(b,a)}H=of[z];
H.le=function(a,b){var c=this.Le(b),d=[null===c.f,null===c.u];if(!d[0]){var g=this.hd(a,c.f);d[0]=c.aa?1==g:-1!=g}d[1]||(g=this.hd(a,c.u),d[1]=c.fa?-1==g:1!=g);return d};H.compare=function(a,b){return this.hd(a,b)};H.min=function(a,b){return a<b?1:a==b?0:-1};H.max=function(a,b){return a>b?1:a==b?0:-1};H.kc=function(a,b){var c=this.le(a,b);return c[0]&&c[1]};H.re=function(){return Td()};H.hg=function(a,b){return this.ig(a,b)};
H.Cg=function(a){return a[Ea](function(a){return null!==a})[xb](J(function(a,c){return this.ig(a,c)},this))};H.Fe=function(a){return Jb(this.Le(a).f)};H.Qd=function(a){a=this.Le(a);return[a.f,a.u]};f(H,function(){return this.hd==qf?"SimpleComparator_DESC":"SimpleComparator_ASC"});function pf(a){this.za=a.map(function(a){return new of(a)})}K(pf,Ld);H=pf[z];H.qe=function(a,b,c){for(var d=0,g=0;g<this.za[y]&&0==d;++g)d=c(this.za[g],a[g],b[g]);return d};
H.compare=function(a,b){return this.qe(a,b,function(a,b,g){return a[Wa](b,g)})};H.min=function(a,b){return this.qe(a,b,function(a,b,g){return a.min(b,g)})};H.max=function(a,b){return this.qe(a,b,function(a,b,g){return a.max(b,g)})};H.le=function(a,b){for(var c=[!0,!0],d=0;d<this.za[y]&&(c[0]||c[1]);++d){var g=this.za[d].le(a[d],b[d]);c[0]=c[0]&&g[0];c[1]=c[1]&&g[1]}return c};H.kc=function(a,b){for(var c=!0,d=0;d<this.za[y]&&c;++d)c=this.za[d].kc(a[d],b[d]);return c};H.re=function(){return this.za.map(function(a){return a.re()})};
H.Cg=function(a){var b=a[Ea](function(a){return a[yb](Kb)});a=e(this.za[y]);for(var c=0;c<a[y];c++)a[c]=b.map(function(a){return a[c]});a[n](function(a,b){a[xb](J(function(a,c){return this.za[b].hg(a,c)},this))},this);b=e(b[y]);for(c=0;c<b[y];c++)b[c]=a.map(function(a){return a[c]});return b[xb](J(function(a,b){for(var c=0,l=0;l<this.za[y]&&0==c;++l)c=this.za[l].hg(a[l],b[l]);return c},this))};H.Fe=function(a){return this.za[0].Fe(a[0])};
H.Qd=function(a){var b=a.map(function(a,b){return this.za[b].Qd(a)[0]},this);a=a.map(function(a,b){return this.za[b].Qd(a)[1]},this);return[b,a]};
function uf(a){this.wa=a;this.Za=new O}H=uf[z];ia(H,function(){return this.wa[k]()});H.add=function(a,b){null===a?this.Za.add(b):this.wa.add(a,b)};H.set=function(a,b){null===a?(this.Za[Pa](),this.Za.add(b)):this.wa.set(a,b)};ja(H,function(a,b){null===a?b?this.Za[m](b):this.Za[Pa]():this.wa[m](a,b)});H.get=function(a){return null===a?this.Za.c():this.wa.get(a)};H.ld=function(a){return this.wa.ld(a)};H.Va=function(a,b,c,d){b=this.wa.Va(a,b,c,d);return null!=a?b:b[Ka](this.Za.c())};
ma(H,function(){this.Za[Pa]();this.wa[Pa]()});H.s=function(a){return null===a?!this.Za.Ha():this.wa.s(a)};H.min=function(){return this.wa.min()};H.max=function(){return this.wa.max()};H.Fa=function(){return[new Zc(-2,this.Za.c())][Ka](this.wa.Fa())};H.Bc=function(){return this.wa.Bc()};
function vf(a){this.B=a;this.ub=new We;this.L=new of(1)}H=vf[z];ia(H,G("B"));H.add=function(a){if("number"!=typeof a)throw new P("DataError","Row id must be numbers");this.ub.add(a)};H.set=function(a,b){this.add(a,b)};ja(H,function(a){this.ub[qb](a)});H.get=function(a){return this.s(a)?[a]:[]};H.min=function(){return this.Rc(J(this.L.min,this.L))};H.max=function(){return this.Rc(J(this.L.max,this.L))};
H.Rc=function(a){if(0==this.ub[Ya])return[null,null];var b=Xe(this.ub)[kb](J(function(b,d){return null===b||1==a(d,b)?d:b},this),null);return[b,[b]]};H.ld=function(){return this.ub[Ya]};H.Va=function(a,b,c,d){var g=a||[Td()];a=Xe(this.ub)[Ea](function(a){return g[wb](function(b){return this.L.kc(a,b)},this)},this);return Ze(a,b,c,d)};ma(H,function(){this.ub[Pa]()});H.s=function(a){return this.ub.has(a)};H.Fa=function(){return[new Zc(0,Xe(this.ub))]};H.Bc=G("L");
function wf(a,b){var c=new vf(a);b[0].w()[n](function(a){c.add(a,a)});return c};
function xf(a){this.m=a;this.vb=a.o(ud);this.N=a.o(wd);this.pa=a.o(vd)}H=xf[z];H.Ba=function(a){var b=a.gb(),c=J(function(){if(0==b[y])return Qc();var a=b[Ha]();return(a.Rb()?this.mi(a):this.ni(a))[A](c)},this);return c()};H.ni=function(a){var b=new Pd(this.m,[a]);return this.vb.Fb(0,b).Z(a[k](),J(a.dc,a)).get([])[A](J(function(b){this.pa.set(a[k](),b);this.Zj(a,b)},this))};H.Zj=function(a,b){var c=this.N.aj(a[k]());b[n](function(a){c[n](function(b){var c=a.Pc(b[k]());b.add(c,a.id())})})};
H.mi=function(a){var b=new Pd(this.m,[a]),c=this.vb.Fb(0,b),b=c.Z(a[k](),a.dc).get([])[A](J(function(b){this.pa.set(a[k](),b)},this)),d=a.Ga().map(function(a){return this.$j(a,c)},this)[Ka](this.ak(a,c));return Sc(d[Ka](b))};
H.$j=function(a,b){var c=b.Z(a.l(),ad,1),d=nf(a);return c.get([])[A](J(function(b){L("btree"==b[0].w().type);if(1<b[y]){if(a.Nf()){var c=ef[q](void 0,d,a.l(),a.Fd),l=b[w](1),p=-1;for(b=0;b<l[y];++b)if(-2==l[b].id()){p=b;break}if(-1==p)throw new P("DataError","Data corruption detected");b=l[p].w();l=l[w](0);l[E](p,1);c=c(l);c=new uf(c);c.Za[lb](b)}else c=ef(d,a.l(),a.Fd,b[w](1));this.N.set(c)}},this))};
H.ak=function(a,b){return b.Z(a.Ib(),ad,1).get([])[A](J(function(b){L("rowid"==b[0].w().type);1<b[y]&&(b=wf(a.Ib(),b[w](1)),this.N.set(b))},this))};


function yf(){this.O=new N}yf[z].Ba=function(a){a.gb()[n](function(a){var c=a.Ib();if(null===this.get(c)){var d=new vf(c);this.O.set(c,d)}a.Ga()[n](function(a){this.O.set(a.l(),zf(a))},this)},this);return Qc()};function zf(a){var b=nf(a),b=new $e(a.l(),b,a.Fd);return a.Nf()?new uf(b):b}yf[z].get=function(a){return this.O.get(a,null)};yf[z].set=function(a){return this.O.set(a[k](),a)};yf[z].aj=function(a){var b=[],c=a+".";this.O.G()[n](function(a){0==a[ob](c)&&b[v](this.O.get(a))},this);return b};
function Af(a){this.$a=[];Fb(a)&&this.add(a)}H=Af[z];f(H,function(){return this.$a.map(function(a){return a[r]()})[F](",")});H.s=function(a){return this.$a[wb](function(b){return b[u](a)})};H.c=G("$a");
H.add=function(a){if(0!=a[y])if(a=this.$a[Ka](a),1==a[y])this.$a=a;else{a[xb](Ud);for(var b=[],c=a[0],d=1;d<a[y];++d)if(c.jg(a[d])){var g=a[d],h=Td();if(null!==c.f&&null!==g.f){var l=Sd(c.f,g.f,!0);1!=l?(h.f=c.f,h.aa=0!=l?c.aa:c.aa&&g.aa):(h.f=g.f,h.aa=g.aa)}null!==c.u&&null!==g.u&&(l=Sd(c.u,g.u,!1),-1!=l?(h.u=c.u,h.fa=0!=l?c.fa:c.fa&&g.fa):(h.u=g.u,h.fa=g.fa));c=h}else b[v](c),c=a[d];b[v](c);this.$a=b}};
H.Fc=function(a){return this.$a[y]==a.$a[y]?0==this.$a[y]||this.$a[yb](function(b,c){return b.Fc(a.$a[c])}):!1};function Bf(a,b){var c=[];a.c().map(function(a){return b.c().map(function(b){var c;if(a.jg(b)){c=Td();var l=Sd(a.f,b.f,!0),l=0==l?a.aa?a:b:-1!=l?a:b;c.f=l.f;c.aa=l.aa;null===a.u||null===b.u?b=null===a.u?b:a:(l=Sd(a.u,b.u,!1),b=0==l?a.fa?a:b:-1==l?a:b);c.u=b.u;c.fa=b.fa}else c=null;return c})})[n](function(a){c=c[Ka](a)});return new Af(c[Ea](function(a){return null!==a}))};
function Cf(a,b){var c=[],d=null,g=null;a.qc(function(a){var l=b(a);null==a[Ga]()?g=l:d.ia(l);var p=a[Ga]();null!==p&&p.ua()==d.ua()&&(p=c[ob](d),-1!=p&&c[E](p,1));1<a.ua()&&c[v](l);d=a.Sf()?c[c[y]-1]:l});return g}function Df(a){return Ef(a,function(a){return a.Sf()})}function Ff(a){var b=a[Ga](),c=0;null!==b&&(c=b.Y()[ob](a),b[sb](a));var d=a.Y()[w]();d[n](function(d,h){a[sb](d);null===b||b.tc(d,c+h)});return{parent:b,children:d}}
function Gf(a,b){a.Y()[w]()[n](function(c){a[sb](c);b.ia(c)});a.ia(b)}function Hf(a){L(1==a.ua());var b=a.pb(0);L(1==b.ua());Ff(a);Gf(b,a);return b}function If(a,b,c){L(1==a.ua());var d=a.pb(0);L(1<d.ua());var g=d.Y()[w]();if(!g[wb](function(a){return b(a)}))return a;Ff(a);g[n](function(g,l){if(b(g)){var p=c(a);d.Sd(l);p.ia(g);d.tc(p,l)}});return d}function Jf(a,b,c,d){var g=a[Ga]();null!==g&&(a=g.Y()[ob](a),g.Sd(a),g.tc(c,a));b.Y()[w]()[n](function(a){b[sb](a);d.ia(a)});return c}
function Ef(a,b,c){function d(a){b(a)&&g[v](a);null!=c&&c(a)||a.Y()[n](d)}var g=[];d(a);return g}function Kf(a,b){var c=b||function(a){return a[r]()+"\n"},d="";a.qc(function(a){for(var b=0;b<a.Li();b++)d+="-";d+=c(a)});return d};

function Lf(a){pe[D](this);this.Ob=a;this.Xa=!1}K(Lf,pe);H=Lf[z];H.Eb=function(){return Cf(this,function(a){if(a instanceof Lf){var b=new Lf(a.Ob);b.Xa=a.Xa;b.Xe(a.ka());return b}return a.Eb()}[q](this))};H.xb=function(a){var b=a||[];this.qc(function(a){a!=this&&a.xb(b)}[q](this));return(new O(b)).c()};H.Vd=function(a){this.Xa!=a&&(this.Xa=a,this.Ob="and"==this.Ob?"or":"and",this.Y()[n](function(b){return b.Vd(a)}))};H.eval=function(a){var b=this.Y().map(function(b){return b.eval(a)});return this.Fh(b)};
H.Fh=function(a){return"and"==this.Ob?Zd(a):$d(a)};f(H,function(){return"combined_pred_"+this.Ob[r]()});function Mf(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b};function Nf(){this[Pa]()}var Of=ba[z][Ua],Pf=ba[z][bb];H=Nf[z];H.set=function(a,b){this.ad(a);var c=!this.Nc(a);this.g[a]=b;if("__proto__"==a||!Qf&&!Of[D](this.g,a)){delete this.g[a];var d=bc(this.Bb,a);if(c=0>d)d=this.Bb[y];this.Bb[d]=a;this.Td[d]=b}c&&this.$++};H.get=function(a,b){this.ad(a);if(this.Nc(a))return this.g[a];var c=bc(this.Bb,a);return 0<=c?this.Td[c]:b};
ja(H,function(a){this.ad(a);if(this.Nc(a))return this.$--,delete this.g[a],!0;a=bc(this.Bb,a);return 0<=a?(this.$--,hc(this.Bb,a),hc(this.Td,a),!0):!1});H.addAll=function(a){cc(a.G(),function(b){this.set(b,a.get(b))},this)};H.Ha=function(){return!this.$};H.na=G("$");H.s=function(a){this.ad(a);return this.Nc(a)||0<=bc(this.Bb,a)};H.kd=function(a){return tc(this.g,function(b,c){return this.Nc(c)&&Mf(b,a)},this)||0<=bc(this.Td,a)};
H.G=function(){var a;if(Rf)a=jc(ba.keys(this.g));else{a=[];for(var b in this.g)Pf[D](this.g,b)&&a[v](b)}kc(a,this.Bb);return a};H.c=function(){for(var a=[],b=this.G(),c=0;c<b[y];c++)a[v](this.get(b[c]));return a};H.getEntries=function(){for(var a=[],b=this.G(),c=0;c<b[y];c++){var d=b[c];a[v]([d,this.get(d)])}return a};ma(H,function(){this.g=Qf?ba[Va](null):{};this.Bb=[];this.Td=[];this.$=0});sa(H,function(){var a=new Nf;a[lb](this);return a});
H.Nc=function(a){return"__proto__"==a?!1:Qf?a in this.g:Pf[D](this.g,a)};H.ad=function(a){L(Mb(a),"key must be a string.")};var Qf=!!ba[Va],Rf=!!ba.keys;function Sf(){this[Pa]()}H=Sf[z];H.$=0;ma(H,function(){this.$=0;this.g=new Nf});sa(H,function(){var a=new Sf;a.Tg(this);return a});H.add=function(a,b){var c=this.g.get(a);c||this.g.set(a,c=[]);c[v](b);this.$++};H.Tg=function(a){cc(a.getEntries(),function(a){this.add(a[0],a[1])},this)};H.get=function(a){return(a=this.g.get(a))?jc(a):[]};ja(H,function(a,b){var c=this.g.get(a);if(!c)return!1;var d=ic(c,function(a){return Mf(b,a)});d&&(this.$--,0==c[y]&&this.g[m](a));return d});H.Ha=function(){return!this.$};
H.na=G("$");H.s=function(a){return this.g.s(a)};H.kd=function(a){return fc(this.g.c(),function(b){return fc(b,function(b){return Mf(b,a)})})};H.G=function(){return this.g.G()};H.c=function(){return rc(this.g.c())};H.getEntries=function(){for(var a=this.G(),b=[],c=0;c<a[y];c++)for(var d=a[c],g=this.get(d),h=0;h<g[y];h++)b[v]([d,g[h]]);return b};
function Tf(a,b,c){pe[D](this);this.Oa=a;this.bb=b;this.V=c;this.nd=he.ue().te(this.Oa.da(),this.V)}K(Tf,pe);H=Tf[z];H.Eb=function(){var a=new Tf(this.Oa,this.bb,this.V);a.Xe(this.ka());return a};H.xb=function(a){return null!=a?(a[v](this.Oa),a[v](this.bb),a):[this.Oa,this.bb]};H.eval=function(a){var b=a[C][Ea](function(a){var b=a.M(this.Oa);a=a.M(this.bb);return this.nd(b,a)},this);return new Vd(b,a.W())};f(H,function(){return"join_pred("+this.Oa.l()+", "+this.bb.l()+")"});
H.mf=function(a){return-1!=a.W()[ob](this.Oa.Z().Aa())};H.ah=function(a){return-1!=a.W()[ob](this.bb.Z().Aa())};H.Th=function(a,b){var c=null,d=null;this.mf(a)?(this.pf(a,b),c=a,d=b):(this.pf(b,a),c=b,d=a);return[c,d]};H.pf=function(a,b){L(this.mf(a),"Mismatch between join predicate left operand and right relation.");L(this.ah(b),"Mismatch between join predicate right operand and right relation.")};H.$h=function(a,b){var c=this.Th(a,b),d=c[0],c=c[1];return"eq"==this.V?this.ai(d,c):this.bi(d,c)};
H.bi=function(a,b){for(var c=[],d=a.W(),g=b.W(),h=0;h<a[C][y];h++)for(var l=0;l<b[C][y];l++)if(this.nd(a[C][h].M(this.Oa),b[C][l].M(this.bb))){var p=de(a[C][h],d,b[C][l],g);c[v](p)}d=a.W()[Ka](b.W());return new Vd(c,d)};
H.ai=function(a,b){var c=a,d=b,g=this.Oa,h=this.bb;a[C][y]>b[C][y]&&(c=b,d=a,g=this.bb,h=this.Oa);var l=new Sf,p=[];c[C][n](function(a){var b=String(a.M(g));l.add(b,a)});var B=c.W(),Ra=d.W();d[C][n](function(a){var b=String(a.M(h));l.s(b)&&l.get(b)[n](function(b){b=de(a,Ra,b,B);p[v](b)})});c=a.W()[Ka](b.W());return new Vd(p,c)};
function Uf(a,b,c){return null===b?new re(a,b,c):Fb(b.l)?new Tf(a,b,c):new re(a,b,c)};
var Vf={};I("lf.schema.DataStoreType",Vf,void 0);Vf.INDEXED_DB=0;Vf.MEMORY=1;Vf.LOCAL_STORAGE=2;Vf.FIREBASE=3;Vf.WEB_SQL=4;Vf.OBSERVABLE_STORE=5;function Wf(a,b,c,d){this.Eg=a;za(this,b);this.Fd=c;this.h=d}Wf[z].l=function(){return this.Eg+"."+this[rb]};Wf[z].Nf=function(){return this.h[wb](function(a){return a.cb.lc()})};function Xf(a,b,c,d){this.B=a;this.qa=c;this.H=b;this.Md=d;this.ib=null}I("lf.schema.Table",Xf,void 0);ia(Xf[z],G("B"));Xf[z].Ua=G("ib");Xf[z].Aa=function(){return this.ib||this.B};
Xf[z].wc=function(a){var b=new this.constructor(this.B);b.ib=a;return b};Xf[z].as=Xf[z].wc;Xf[z].createRow=Xf[z].wb;Xf[z].deserializeRow=Xf[z].dc;Xf[z].Ga=G("qa");Xf[z].xb=G("H");Xf[z].getConstraint=Xf[z].ic;Xf[z].Rb=G("Md");Xf[z].Ib=function(){return this.B+".#"};
function T(a,b){ta(this,a);this.Zb=b;this.ib=null}H=T[z];ia(H,function(){return this.Zb+"("+this[gb][k]()+")"});H.l=function(){return this.Zb+"("+this[gb].l()+")"};H.Z=function(){return this[gb].Z()};f(H,function(){return this.l()});H.da=function(){return this[gb].da()};H.Ua=G("ib");H.Ga=function(){return[]};H.lc=Db(!1);H.wc=function(a){this.ib=a;return this};T[z].as=T[z].wc;T[z].Cf=function(){for(var a=[this],b=this;b instanceof T;)a[v](b[gb]),b=b[gb];return a};
function Yf(a){this.ib=a||null;this.F=new Xf("#UnknownTable",[],[],!1)}H=Yf[z];ia(H,Db("*"));H.l=function(){return this[k]()};f(H,function(){return this.l()});H.Z=G("F");H.da=Db(4);H.Ua=G("ib");H.Ga=function(){return[]};H.lc=Db(!1);
I("lf.fn.avg",function(a){return new T(a,"AVG")},void 0);I("lf.fn.count",function(a){return new T(a||new Yf,"COUNT")},void 0);function Zf(a){return new T(a,"DISTINCT")}I("lf.fn.distinct",Zf,void 0);I("lf.fn.max",function(a){return new T(a,"MAX")},void 0);I("lf.fn.min",function(a){return new T(a,"MIN")},void 0);I("lf.fn.stddev",function(a){return new T(a,"STDDEV")},void 0);I("lf.fn.sum",function(a){return new T(a,"SUM")},void 0);I("lf.fn.geomean",function(a){return new T(a,"GEOMEAN")},void 0);
function U(a,b){ne[D](this,"","");this.ji=b;this.fg=a}K(U,ne);H=U[z];H.ca=Db(null);ha(H,function(a,b){switch(this.ji){case 1:return this.ei(a,b);case 0:return this.di(a,b);default:return this.gi(a,b)}});f(H,Db("dummy_node"));H.Zc=function(){return this[r]()};H.nf=function(a){L(-1==this.fg||a[y]==this.fg)};H.gi=function(a,b){return new M(J(function(c){c(this.ja(a,[],b))},this))};H.ei=function(a,b){return this.pb(0)[Ia](a,b)[A](J(function(c){this.nf(c);return this.ja(a,c,b)},this))};
H.di=function(a,b){var c=this.Y().map(function(c){return c[Ia](a,b)});return Sc(c)[A](J(function(c){var g=[];c[n](function(a){for(var b=0;b<a[y];++b)g[v](a[b])});this.nf(g);return this.ja(a,g,b)},this))};
function $f(a){U[D](this,-1,1);this.jf=a}K($f,U);f($f[z],function(){return"aggregation("+this.jf.map(function(a){return a.l()})[r]()+")"});$f[z].ja=function(a,b){b[n](function(a){(new ag(a,this.jf)).oh()},this);return b};function ag(a,b){this.Da=a;this.H=b}
ag[z].oh=function(){this.H[n](function(a){a=a.Cf().reverse();for(var b=1;b<a[y];b++){var c=a[b],d=c.Cf()[w](-1)[0],g=this.Oi(c),h=null;switch(c.Zb){case "MIN":h=bg(g,d);break;case "MAX":h=cg(g,d);break;case "DISTINCT":h=dg(g,d);break;case "COUNT":h=g[C][y];break;case "SUM":h=eg(g,d);break;case "AVG":0<g[C][y]&&(h=eg(g,d)/g[C][y]);break;case "GEOMEAN":h=fg(g,d);break;default:h=gg(g,d)}this.Da.jk(c,h)}},this)};ag[z].Oi=function(a){return a[gb]instanceof T?this.Da.hc(a[gb]):this.Da};
function bg(a,b){var c=null;a[C][n](function(a){a=a.M(b);if(null===c||a<c)c=a});return c}function cg(a,b){var c=null;a[C][n](function(a){a=a.M(b);if(null===c||a>c)c=a});return c}function eg(a,b){return a[C][kb](function(a,d){return a+d.M(b)},0)}function gg(a,b){var c=a[C].map(function(a){return a.M(b)});return ld[ib](null,c)}function fg(a,b){var c=0,d=a[C][kb](function(a,d){var l=d.M(b);return 0!=l?(c++,a+ea.log(l)):a},0);return 0==c?null:ea.pow(ea.E,d/c)}
function dg(a,b){var c=new N;a[C][n](function(a){var g=a.M(b);c.set(g,a)});return new Vd(c.c(),a.W())};
function V(){ne[D](this,"","")}K(V,ne);function hg(a,b){V[D](this);oa(this,a);la(this,b)}K(hg,V);function ig(a,b){hg[D](this,a,b)}K(ig,hg);function jg(a){V[D](this);oa(this,a)}K(jg,V);f(jg[z],function(){return"delete("+this[t][k]()+")"});function kg(a,b){V[D](this);oa(this,a);this.df=b}K(kg,V);f(kg[z],function(){var a=[];this.df&&(a=this.df.map(function(a){return a.K[k]()},this));return"update("+this[t][k]()+", ["+a[F](",")+"])"});function lg(a){V[D](this);this.Ca=a}K(lg,V);
f(lg[z],function(){return"select("+this.Ca[r]()+")"});function mg(a){V[D](this);oa(this,a)}K(mg,V);f(mg[z],function(){var a="table_access("+this[t][k]();null===this[t].Ua()||(a+=" as "+this[t].Ua());return a+")"});function ng(){V[D](this)}K(ng,V);f(ng[z],Db("cross_product"));function og(a,b){V[D](this);this.h=a;this.Kb=b}K(og,V);f(og[z],function(){var a="project("+this.h[r]();if(null!==this.Kb)var b=this.Kb.map(function(a){return a.l()})[F](", "),a=a+(", groupBy("+b+")");return a+")"});
function pg(a){V[D](this);this.J=a}K(pg,V);f(pg[z],function(){return"order_by("+ve(this.J)+")"});function qg(a){V[D](this);this.h=a}K(qg,V);f(qg[z],function(){return"aggregation("+this.h[r]()+")"});function rg(a){V[D](this);this.h=a}K(rg,V);f(rg[z],function(){return"group_by("+this.h[r]()+")"});function sg(a){V[D](this);this.oa=a}K(sg,V);f(sg[z],function(){return"limit("+this.oa+")"});function tg(a){V[D](this);this.ma=a}K(tg,V);f(tg[z],function(){return"skip("+this.ma+")"});
function ug(a){V[D](this);this.Ca=a}K(ug,V);f(ug[z],function(){return"join("+this.Ca[r]()+")"});
function vg(){};
function wg(){}K(wg,vg);wg[z].zb=function(a){this.ha=a;this.Ta(this.ha);return this.ha};wg[z].Ta=function(a){if(a instanceof lg){L(1==a.ua(),"SelectNode must have exactly one child.");var b=this.rf(a.Ca),b=this.Nh(b);Jf(a,a,b[0],b[1]);a==this.ha&&(this.ha=b[0]);a=b[0]}a.Y()[n](function(a){this.Ta(a)},this)};wg[z].rf=function(a){if(0==a.ua()||"and"!=a.Ob)return[a];var b=a.Y()[w]().map(function(b){a[sb](b);return this.rf(b)},this);return rc(b)};
wg[z].Nh=function(a){var b=null,c=null;a.map(function(a,g){var h=new lg(a);0==g?b=h:c.ia(h);c=h},this);return[b,c]};
function xg(){}K(xg,vg);xg[z].zb=function(a){this.ha=a;this.Ta(this.ha);return this.ha};xg[z].Ta=function(a){if(a instanceof ng)for(;2<a.ua();){for(var b=new ng,c=0;2>c;c++){var d=a.Sd(0);b.ia(d)}a.tc(b,0)}a.Y()[n](function(a){this.Ta(a)},this)};
function yg(){U[D](this,2,0)}K(yg,U);f(yg[z],Db("cross_product"));yg[z].ja=function(a,b){for(var c=b[0],d=b[1],g=[],h=c.W(),l=d.W(),p=0;p<c[C][y];p++)for(var B=0;B<d[C][y];B++){var Ra=de(c[C][p],h,d[C][B],l);g[v](Ra)}c=c.W()[Ka](d.W());return[new Vd(g,c)]};

function zg(a,b){ye[D](this,a,b);this.Ra=a.o(yd);this.yb=a.o(zd)}K(zg,ye);wa(zg[z],Db(2));zg[z].Ne=function(a){0==this.da()?this.Ij(a):this.Xc()};zg[z].Ij=function(a){this.Pd[n](function(b,c){b instanceof ue&&this.yb.Og(b,a[c])},this)};zg[z].Xc=function(){var a=this.yb.Ae(this.ca().c());0!=a[y]&&(a=new Ae(this[Ta],a),this.Ra.Ub(a))};
function Ag(){se[D](this)}K(Ag,se);sa(Ag[z],function(){var a=new Ag;a.gd(this);a.f=this.f;return a});na(Ag[z],function(a){Ag.eb[q][D](this,a);this.fe(a);return this});
function Bg(){se[D](this)}K(Bg,se);sa(Bg[z],function(){var a=new Bg;a.gd(this);a.Wa=this.Wa;this[Oa]&&la(a,this[Oa]instanceof ee?this[Oa]:this[Oa][w]());a.vc=this.vc;a.$b=this.$b;return a});na(Bg[z],function(a){Bg.eb[q][D](this,a);this.$b&&la(this,this.$b instanceof ee?a[this.$b.qb()]:this.$b.map(function(b){return b instanceof ee?a[b.qb()]:b}));return this});
function Cg(){se[D](this)}K(Cg,se);sa(Cg[z],function(){var a=new Cg;a.gd(this);oa(a,this[t]);a.set=this.set?this.set[w]():this.set;return a});na(Cg[z],function(a){Cg.eb[q][D](this,a);this.set[n](function(b){-1!=b.bd&&va(b,a[b.bd])});this.fe(a);return this});
function Dg(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+cd(b)+"'";default:return"'"+b[r]()+"'"}}function Eg(a,b){var c=a.vc?"INSERT OR REPLACE":"INSERT",d=a.Wa.xb(),c=c+(" INTO "+a.Wa[k]()+"("),c=c+d.map(function(a){return a[k]()})[F](", "),c=c+") VALUES (";return a[Oa].map(function(a){var h=d.map(function(c){var d=a.w()[c[k]()];return b?null!=d?"#":"NULL":Dg(c.da(),d)});return c+h[F](", ")+");"})[F]("\n")}
function Fg(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Gg(a,b,c,d){return a instanceof ee?"?"+a.qb()[r]():d?null!=a?"#":"NULL":"match"==b?"'"+a[r]()+"'":"in"==b?"("+a.map(function(a){return Dg(c,a)})[F](", ")+")":"between"==b?Dg(c,a[0])+" AND "+Dg(c,a[1]):Dg(c,a)[r]()}
function Hg(a,b){return a.Y().map(function(a){return"("+Ig(a,b)+")"})[F]("and"==a.Ob?" AND ":" OR ")}function Ig(a,b){if(a instanceof re)return[a.K.l(),Fg(a.V),Gg(a[x],a.V,a.K.da(),b)][F](" ");if(a instanceof Lf)return Hg(a,b);if(a instanceof Tf)return[a.Oa.l(),Fg(a.V),a.bb.l()][F](" ");throw new P("NotSupportedError","toSql does not support predicate type: "+typeof a);}function Jg(a,b){var c=Ig(a,b);return c?" WHERE "+c:""}
function Kg(a,b){var c="UPDATE "+a[t][k]()+" SET ",c=c+a.set.map(function(a){var b=a.K.l()+" = ";return-1!=a.bd?b+"?"+a.bd[r]():b+Dg(a.K.da(),a[x])[r]()})[F](", ");a.D&&(c+=Jg(a.D,b));return c+";"}
function Lg(a,b){var c="*";a.h[y]&&(c=a.h.map(function(a){return a.Ua()?a.l()+" AS "+a.Ua():a.l()})[F](", "));var d=a.f.map(function(a){return a.Aa()!=a[k]()?a[k]()+" AS "+a.Aa():a[k]()})[F](", "),c="SELECT "+c+" FROM "+d;a.D&&(c+=Jg(a.D,b));a.J&&(d=a.J.map(function(a){return a.K.l()+(0==a.mb?" DESC":" ASC")})[F](", "),c+=" ORDER BY "+d);a.la&&(d=a.la.map(function(a){return a.l()})[F](", "),c+=" GROUP BY "+d);a.oa&&(c+=" LIMIT "+a.oa[r]());a.ma&&(c+=" SKIP "+a.ma[r]());return c+";"}
function Mg(a,b){var c=b||!1,d=a.Hf();if(d instanceof Bg)return Eg(d,c);if(d instanceof Ag){var g="DELETE FROM "+d.f[k]();d.D&&(g+=Jg(d.D,c));return g+";"}if(d instanceof Cg)return Kg(d,c);if(d instanceof ue)return Lg(d,c);throw new P("NotSupportedError","toSql not implemented for "+typeof d);};
function Ng(a,b){this.global=a;this.Xj=a.o(xd);this.Ra=a.o(yd);this.a=b}I("lf.query.BaseBuilder",Ng,void 0);ha(Ng[z],function(){try{this.jb()}catch(a){return Rc(a)}return new M(function(a,c){var d=new zg(this[Ta],[this.Lc()]);this.Ra.Ub(d)[A](function(c){a(c[0].ve())},c)},this)});ha(Ng[z],Ng[z][Ia]);Ng[z].Af=function(){var a=J(function(a){return a.Zc(this.a)+"\n"},this);return Kf(this.we().Hb(),a)};Ng[z].explain=Ng[z].Af;na(Ng[z],function(a){this.a[q](a);return this});na(Ng[z],Ng[z][q]);
Ng[z].xk=function(a){return Mg(this,a)};Ng[z].toSql=Ng[z].xk;H=Ng[z];H.jb=Bb();H.Hf=function(){return this.a.clone()};H.xd=G("a");H.we=function(){null==this.kg&&(this.kg=this.Xj.Ui(this.a));return this.kg};H.Lc=function(){return{context:this.Hf(),Qe:this.we()}};H.Si=function(){return{context:this.xd(),Qe:this.we()}};
function Og(a){Ng[D](this,a,new Ag)}K(Og,Ng);I("lf.query.DeleteBuilder",Og,void 0);Og[z].f=function(a){this.fh();this.a.f=a;return this};Og[z].from=Og[z].f;Og[z].D=function(a){this.ee();this.a.D=a;return this};Og[z].where=Og[z].D;Og[z].fh=function(){if(null!=this.a.f)throw new P("SyntaxError","from() has already been called.");};Og[z].ee=function(){if(null!=this.a.D)throw new P("SyntaxError","where() has already been called.");};
Og[z].jb=function(){Og.eb.jb[D](this);if(null==this.a.f)throw new P("SyntaxError","Invalid usage of delete()");};
function Pg(a,b){Ng[D](this,a,new Bg);this.a.vc=b||!1}K(Pg,Ng);I("lf.query.InsertBuilder",Pg,void 0);Pg[z].jb=function(){Pg.eb.jb[D](this);var a=this.a;if(null==a.Wa||null==a[Oa])throw new P("SyntaxError","Invalid usage of insert()");if(a.vc&&null===a.Wa.ic().xe())throw new P("SyntaxError","Attempted to insert or replace in a table with no primary key.");};Pg[z].Wa=function(a){this.gh();this.a.Wa=a;return this};Pg[z].into=Pg[z].Wa;
la(Pg[z],function(a){this.hh();a instanceof ee||a[wb](function(a){return a instanceof ee})?this.a.$b=a:la(this.a,a);return this});la(Pg[z],Pg[z][Oa]);Pg[z].gh=function(){if(null!=this.a.Wa)throw new P("SyntaxError","into() has already been called.");};Pg[z].hh=function(){if(null!=this.a[Oa])throw new P("SyntaxError","values() has already been called.");};
function Qg(a){return Rg("and",e[z][w][D](arguments))}I("lf.op.and",Qg,void 0);I("lf.op.or",function(a){return Rg("or",e[z][w][D](arguments))},void 0);function Rg(a,b){var c=new Lf(a);b[n](function(a){c.ia(a)});return c}I("lf.op.not",function(a){a.Vd(!0);return a},void 0);
function W(a,b){Ng[D](this,a,new ue);this.Bf=this.Rg=!1;this.a.h=b;this.vh();this.uh()}K(W,Ng);I("lf.query.SelectBuilder",W,void 0);H=W[z];H.jb=function(){W.eb.jb[D](this);var a=this.a;if(null==a.f)throw new P("SyntaxError","Invalid usage of select()");if(Fb(a.Mb)&&!Fb(a.oa)||Fb(a.Xb)&&!Fb(a.ma))throw new P("SyntaxError","Binding parameters of limit/skip without providing values");this.Bh()};
H.vh=function(){var a=this.a.h[Ea](function(a){return a instanceof T&&"DISTINCT"==a.Zb},this);if(0!=a[y]&&(1!=a[y]||1!=this.a.h[y]))throw new P("SyntaxError","Invalid usage of lf.fn.distinct()");};H.Bh=function(){null!=this.a.la?this.wh():this.Ah()};
H.wh=function(){var a=this.a.h[Ea](function(a){return!(a instanceof T)}).map(function(a){return a.l()}),b=!1;if(0==this.a.la[y]||0==this.a.h[y])b=!0;else{var c=this.a.la.map(function(a){return a.l()});(b=a[wb](function(a){return-1==c[ob](a)}))||(b=this.a.la[wb](function(a){a=a.da();return 6==a||0==a}))}if(b)throw new P("SyntaxError","Invalid projection list or groupBy columns");};
H.Ah=function(){var a=this.a.h[wb](function(a){return a instanceof T},this),b=this.a.h[wb](function(a){return!(a instanceof T)},this)||0==this.a.h[y];if(a&&b)throw new P("SyntaxError","Invalid projection list, aggregated and non-aggregated can't be mixed.");};H.uh=function(){this.a.h[n](function(a){if(a instanceof T&&!Sg(a.Zb,a.da()))throw new P("SyntaxError","Invalid aggregation detected for"+a.l());},this)};
H.de=function(a,b){if(null!=a)throw new P("SyntaxError",b+"() has already been called.");};H.of=function(a,b){if(0>a)throw new P("SyntaxError",b+"() does not accept negative values");};H.f=function(a){if(this.Bf)throw new P("SyntaxError","from() has already been called.");this.Bf=!0;null==this.a.f&&(this.a.f=[]);this.a.f[v][ib](this.a.f,e[z][w][D](arguments));return this};W[z].from=W[z].f;
W[z].D=function(a){if(this.Rg)throw new P("SyntaxError","where() has already been called.");this.Rg=!0;this.qf(a);return this};W[z].where=W[z].D;W[z].qf=function(a){null!=this.a.D&&(a=Qg(a,this.a.D));this.a.D=a};W[z].De=function(a,b){null==this.a.f&&(this.a.f=[]);this.a.f[v](a);this.qf(b);return this};W[z].innerJoin=W[z].De;W[z].xj=function(){throw new P("NotSupportedError","Not implemented yet");};W[z].leftOuterJoin=W[z].xj;
W[z].oa=function(a){this.de(this.a.oa||this.a.Mb,"limit");a instanceof ee?this.a.Mb=a:(this.of(a,"limit"),this.a.oa=a);return this};W[z].limit=W[z].oa;W[z].ma=function(a){this.de(this.a.ma||this.a.Xb,"skip");a instanceof ee?this.a.Xb=a:(this.of(a,"skip"),this.a.ma=a);return this};W[z].skip=W[z].ma;W[z].J=function(a,b){null==this.a.J&&(this.a.J=[]);this.a.J[v]({K:a,mb:null!=b?b:1});return this};W[z].orderBy=W[z].J;
W[z].la=function(a){this.de(this.a.la,"groupBy");null==this.a.la&&(this.a.la=[]);this.a.la[v][ib](this.a.la,e[z][w][D](arguments));return this};W[z].groupBy=W[z].la;function Sg(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}sa(W[z],function(){var a=new W(this[Ta],this.a.h);a.a=this.a.clone();a.a.Ac=null;return a});sa(W[z],W[z].clone);
function Tg(a,b){Ng[D](this,a,new Cg);oa(this.a,b)}K(Tg,Ng);I("lf.query.UpdateBuilder",Tg,void 0);Tg[z].set=function(a,b){var c={bd:b instanceof ee?b.qb():-1,K:a,value:b};null!=this.a.set?this.a.set[v](c):this.a.set=[c];return this};Tg[z].set=Tg[z].set;Tg[z].D=function(a){this.ee();this.a.D=a;return this};Tg[z].where=Tg[z].D;Tg[z].ee=function(){if(null!=this.a.D)throw new P("SyntaxError","where() has already been called.");};
Tg[z].jb=function(){Tg.eb.jb[D](this);if(null==this.a.set)throw new P("SyntaxError","Invalid usage of update()");if(this.a.set[wb](function(a){return a[x]instanceof ee}))throw new P("SyntaxError","Update set value not bound");};
function Ug(a){this.a=a;this.Ea=null}Ug[z].gc=function(){null===this.Ea&&(this.Ea=this.pd());return this.Ea};function Vg(a){Ug[D](this,a)}K(Vg,Ug);Vg[z].pd=function(){return this.a.vc?new ig(this.a.Wa,this.a[Oa]):new hg(this.a.Wa,this.a[Oa])};function Wg(a){Ug[D](this,a)}K(Wg,Ug);Wg[z].pd=function(){var a=new kg(this.a[t],this.a.set),b=null!=this.a.D?new lg(this.a.D.Eb()):null,c=new mg(this.a[t]);null===b?a.ia(c):(b.ia(c),a.ia(b));return a};
function Xg(a,b){this.Ea=a;this.Ue=b}Xg[z].gc=function(){this.Ue[n](function(a){this.Ea=a.zb(this.Ea)},this);return this.Ea};
function Yg(a){Ug[D](this,a)}K(Yg,Ug);Yg[z].pd=function(){var a=new jg(this.a.f),b=null!=this.a.D?new lg(this.a.D.Eb()):null,c=new mg(this.a.f);null===b?a.ia(c):(b.ia(c),a.ia(b));return(new Xg(a,[new wg])).gc()};
function Zg(){}K(Zg,vg);Zg[z].zb=function(a){this.ha=a;this.Ta(this.ha);return this.ha};Zg[z].Ta=function(a){if(a instanceof lg&&a.Ca instanceof Tf){L(1==a.ua(),"SelectNode must have exactly one child.");var b=a.pb(0);if(b instanceof ng){var c=new ug(a.Ca);Jf(a,b,c,c);a==this.ha&&(this.ha=c);a=c}}a.Y()[n](function(a){this.Ta(a)},this)};
function $g(){this.be=new O}K($g,vg);H=$g[z];H.zb=function(a){this.ha=a;this.Ta(this.ha);this.be[Pa]();return this.ha};H.Ta=function(a){if(this.Qf(a)){var b=a.Ca instanceof re?this.Vj(a):this.Uj(a);this.be.add(a);b==a&&(b=a.pb(0));null!==b&&(Jb(b[Ga]())&&(this.ha=b),this.Qf(b)&&!this.be[u](b)&&this.Ta(b))}else a.Y()[n](function(a){this.Ta(a)},this)};
H.Od=function(a,b){var c=a;if(this.nk(a))c=Hf(a),this.Od(a,b);else if(this.mk(a)){var d=[],c=If(a,b,function(a){a=new lg(a.Ca);d[v](a);return a});d[n](function(a){this.Od(a,b)},this)}return c};H.Vj=function(a){var b=new O([a.Ca.K.Z().Aa()]),c=function(a){return this.zf(a,b)}[q](this);return this.Od(a,c)};H.Uj=function(a){var b=new O([a.Ca.Oa.Z().Aa(),a.Ca.bb.Z().Aa()]),c=function(a){return this.zf(a,b)}[q](this);return this.Od(a,c)};
H.zf=function(a,b){var c=new O;Df(a)[n](function(a){c.add(a[t].Aa())},this);a instanceof mg&&c.add(a[t].Aa());return c.Kh(b)};H.Qf=function(a){return a instanceof lg&&!(a.Ca instanceof Lf)};H.mk=function(a){a=a.pb(0);return a instanceof ng||a instanceof ug};H.nk=function(a){return a.pb(0)instanceof lg};
function ah(a){Ug[D](this,a);this.pg=this.ag=this.Bg=this.gg=this.kf=this.Mf=this.yg=this.wf=this.Dg=null}K(ah,Ug);H=ah[z];H.pd=function(){this.Ci();var a=this.Hh(),b=[new wg,new xg,new $g,new Zg];return(new Xg(a,b)).gc()};H.Ci=function(){this.Ii();this.xi();this.Gi();this.Di();this.Hi();this.Bi();this.zi();this.wi();this.Ei()};
H.Hh=function(){for(var a=[this.ag,this.Bg,this.pg,this.gg,this.kf,this.Mf,this.yg,this.wf],b=null,c=null,d=0;d<a[y];d++){var g=a[d];null!==g&&(null===c?c=g:a[b].ia(g),b=d)}this.Dg[n](function(c){a[b].ia(c)});return c};H.Ii=function(){this.Dg=this.a.f.map(function(a){return new mg(a)},this)};H.xi=function(){2<=this.a.f[y]&&(this.wf=new ng)};H.Gi=function(){this.yg=null!=this.a.D?new lg(this.a.D.Eb()):null};H.Di=function(){this.a.J&&(this.gg=new pg(this.a.J))};
H.Bi=function(){null!=this.a.oa&&(this.ag=new sg(this.a.oa))};H.Hi=function(){null!=this.a.ma&&0<this.a.ma&&(this.Bg=new tg(this.a.ma))};H.zi=function(){null!=this.a.la&&(this.Mf=new rg(this.a.la))};H.wi=function(){var a=this.a.h[Ea](function(a){return a instanceof T});null!=this.a.J&&this.a.J[n](function(b){b.K instanceof T&&a[v](b.K)});0<a[y]&&(this.kf=new qg(a))};H.Ei=function(){this.pg=new og(this.a.h||[],this.a.la||null)};
function ch(){}ch[z].create=function(a){var b=null;if(a instanceof Bg)b=new Vg(a);else if(a instanceof Ag)b=new Yg(a);else if(a instanceof ue)b=new ah(a);else if(a instanceof Cg)b=new Wg(a);else throw new P("SyntaxError","Unknown query context");return b.gc()};
function dh(a){U[D](this,1,1);this.F=a}K(dh,U);f(dh[z],function(){return"delete("+this.F[k]()+")"});dh[z].ca=G("F");dh[z].ja=function(a,b){var c=b[0][C].map(function(a){return a.ta});a[m](this.F,c);return[Yd()]};
function eh(a){U[D](this,1,1);this.Lf=a}K(eh,U);f(eh[z],function(){return"groupBy("+this.Lf.map(function(a){return a.l()})[r]()+")"});eh[z].ja=function(a,b){return this.qh(b[0])};eh[z].qh=function(a){var b=new Sf,c=function(a){return this.Lf.map(function(b){return a.M(b)},this)[F](",")}[q](this);a[C][n](function(a){b.add(c(a),a)},this);return b.G().map(function(c){return new Vd(b.get(c),a.W())},this)};
function fh(a){L(1<a[y],"Should only be called for cross-column indices.");a=a.map(function(a){return a.c()});a=qd[ib](null,a);var b=[];pd(a,function(a){b[v](a)});return b}function gh(a){this.Lb=a}gh[z].ud=function(){return 1==this.Lb.h[y]?[Td()]:[this.Lb.h.map(function(){return Td()})]};function hh(a,b){this.Lb=a;this.ra=b;this.je=this.Zf=null}
hh[z].rh=function(a){var b=new N;this.ra.G()[n](function(c){var d=this.ra.get(c).map(function(b){return a.yd(b)},this),g=new Af([Td()]);d[n](function(a){a=new Af(a.wk());g=Bf(g,a)});b.set(c,g)},this);return b};hh[z].oi=function(a){for(var b=this.Lb.h[y]-1;0<=b;b--){var c=this.Lb.h[b];if(null!==a.get(c.cb[k](),null))break;a.set(c.cb[k](),new Af([Td()]))}};hh[z].ud=function(a){if(this.Zf==a)return this.je;var b=this.rh(a);this.oi(b);this.je=1==this.Lb.h[y]?b.c()[0].c():fh(this.$i(b));this.Zf=a;return this.je};
hh[z].$i=function(a){var b=new N,c=0;this.Lb.h[n](function(a){b.set(a.cb[k](),c);c++});return a.G()[xb](function(a,c){return b.get(a)-b.get(c)}).map(function(b){return a.get(b)})};
function ih(a,b){this.Gg=b;this.N=a.o(wd)}ih[z].Dh=function(a,b){var c=b[Ea](this.rj,this);if(0==c[y])return null;c=this.Ai(c);if(0==c[y])return null;if(1==c[y])return c[0];var d=Number.MAX_VALUE;return c[kb](function(b,c){var l=c.ph(a);return l<d?(d=l,c):b},null)};ih[z].Ai=function(a){return this.Gg.Ga().map(function(b){b=new jh(this.N,b);b.Jh(a);return b},this)[Ea](function(a){return a.wj()})};ih[z].rj=function(a){return a instanceof re&&a.Rf()?a.K.Z()==this.Gg:!1};
function jh(a,b){this.N=a;this.rb=b;this.Of=new O;this.Of[lb](this.rb.h.map(function(a){return a.cb[k]()}));this.Je=this.ra=null}H=jh[z];H.Vi=function(){return null===this.ra?[]:this.ra.c()};H.Gf=function(){L(this.ra);null===this.Je&&(this.Je=new hh(this.rb,this.ra));return this.Je};H.Jh=function(a){a[n](function(a){var c=a.xb()[0][k]();this.Of[u](c)&&(null===this.ra&&(this.ra=new Sf),this.ra.add(c,a.ka()))},this)};
H.wj=function(){if(null===this.ra)return!1;for(var a=!1,b=!0,c=0;c<this.rb.h[y];c++){var d=this.ra.s(this.rb.h[c].cb[k]());if(a&&d){b=!1;break}d||(a=!0)}return b};H.ph=function(a){a=this.Gf().ud(a);var b=this.N.get(this.rb.l());return a[kb](function(a,d){return a+b.ld(d)},0)};
function kh(a,b,c,d){U[D](this,0,-1);this.N=a.o(wd);this.index=b;this.Xf=c;this.Te=d;this.Zd=this.Yd=!1}K(kh,U);f(kh[z],function(){return"index_range_scan("+this[Za].l()+", ?, "+(this.Te?"reverse":"natural")+(this.Yd?", limit:?":"")+(this.Zd?", skip:?":"")+")"});kh[z].Zc=function(a){var b=this[r](),c=this.Xf.ud(a),b=b[Ja]("?",c[r]());this.Yd&&(b=b[Ja]("?",a.oa[r]()));this.Zd&&(b=b[Ja]("?",a.ma[r]()));return b};
kh[z].ja=function(a,b,c){a=this.Xf.ud(c);c=this.N.get(this[Za].l()).Va(a,this.Te,this.Yd?c.oa:void 0,this.Zd?c.ma:void 0).map(function(a){return new Zc(a,{})},this);return[ae(c,[this[Za].Eg])]};
function lh(a){U[D](this,1,1);this.Nd=a}K(lh,U);f(lh[z],Db("select(?)"));lh[z].Zc=function(a){a=a.yd(this.Nd);return this[r]()[Ja]("?",a[r]())};lh[z].ja=function(a,b,c){return[c.yd(this.Nd).eval(b[0])]};
function mh(a,b){U[D](this,1,1);this.pa=a.o(vd);this.F=b}K(mh,U);f(mh[z],function(){return"table_access_by_row_id("+this.F[k]()+")"});mh[z].ca=G("F");mh[z].ja=function(a,b){return[ae(this.pa.get(b[0].Zi()),[this.F.Aa()])]};
function nh(a,b){U[D](this,0,-1);this.pa=a.o(vd);this.N=a.o(wd);oa(this,b)}K(nh,U);f(nh[z],function(){var a="table_access("+this[t][k]();null===this[t].Ua()||(a+=" as "+this[t].Ua());return a+")"});nh[z].ca=G("table");nh[z].ja=function(){var a=this.N.get(this[t].Ib()).Va();return[ae(this.pa.get(a),[this[t].Aa()])]};
function oh(a){this.m=a}K(oh,vg);oh[z].zb=function(a,b){this.ha=a;Ef(a,function(a){return a instanceof nh})[n](function(a){var d=this.vi(a);if(0!=d[y]){var g=(new ih(this.m,a[t])).Dh(b,d.map(function(a){return b.yd(a.Nd)}));if(null!==g){var h=new N;d[n](function(a){h.set(a.Nd,a)},this);this.ha=this.fk(g,h,a,b)}}},this);return this.ha};oh[z].vi=function(a){var b=[];for(a=a[Ga]();a;)a instanceof lh&&b[v](a),a=a[Ga]();return b};
oh[z].fk=function(a,b,c){a.Vi().map(function(a){return b.get(a)})[n](Ff);a=new kh(this.m,a.rb,a.Gf(),!1);var d=new mh(this.m,c[t]);d.ia(a);Jf(c,c,d,a);return a.Hb()};
function ph(a,b){U[D](this,0,-1);this.N=a.o(wd);this.F=b}K(ph,U);f(ph[z],function(){return"insert("+this.F[k]()+")"});ph[z].ca=G("F");ph[z].ja=function(a,b,c){qh(this.F,c[Oa],this.N);a.sb(this.F,c[Oa]);return[ae(c[Oa],[this.F[k]()])]};function qh(a,b,c){a=a.ic().xe();if(null===a?0:a.h[0][Na]){var d=a.h[0].cb[k](),g=c.get(a.l()).max()[0]||0;b[n](function(a){if(0==a.w()[d]||null==a.w()[d])g++,a.w()[d]=g})}}function rh(a,b){U[D](this,0,-1);this.N=a.o(wd);this.F=b}K(rh,U);
f(rh[z],function(){return"insert_replace("+this.F[k]()+")"});rh[z].ca=G("F");rh[z].ja=function(a,b,c){qh(this.F,c[Oa],this.N);a.Ee(this.F,c[Oa]);return[ae(c[Oa],[this.F[k]()])]};
function sh(a){U[D](this,2,0);this.og=a}K(sh,U);f(sh[z],function(){return"join("+this.og[r]()+")"});sh[z].ja=function(a,b){return[this.og.$h(b[0],b[1])]};
function th(){U[D](this,1,1)}K(th,U);f(th[z],Db("limit(?)"));th[z].Zc=function(a){return this[r]()[Ja]("?",a.oa[r]())};th[z].ja=function(a,b,c){b[0][C][E](c.oa);return b};
function uh(a){U[D](this,-1,1);this.J=a}K(uh,U);H=uh[z];f(H,function(){return"order_by("+ve(this.J)+")"});H.ja=function(a,b){if(1==b[y]){var c=this.ri(b[0]);(null===c?b[0]:b[0].hc(c))[C][xb](this.Xh[q](this))}else b[xb](this.bk[q](this));return b};H.ri=function(a){for(var b=null,c=0;c<this.J[y];c++){var d=Zf(this.J[c].K);if(a.kj(d)){b=d;break}}return b};
H.L=function(a,b){var c=null,d=null,g=null,h=-1;do h++,g=this.J[h].K,c=this.J[h].mb,d=a(g),g=b(g);while(d==g&&h+1<this.J[y]);d=d<g?-1:d>g?1:0;return 1==c?d:-d};H.bk=function(a,b){return this.L(function(b){return b instanceof T?a.hc(b):a[C][a[C][y]-1].M(b)},function(a){return a instanceof T?b.hc(a):b[C][b[C][y]-1].M(a)})};H.Xh=function(a,b){return this.L(function(b){return a.M(b)},function(a){return b.M(a)})};
function vh(a,b){this.Da=a;this.H=b}vh[z].Kf=function(){return this.H[wb](function(a){return a instanceof T},this)?this.ij():this.jj()};
vh[z].ij=function(){if(1==this.H[y]&&"DISTINCT"==this.H[0].Zb){var a=this.Da.hc(this.H[0])[C].map(function(a){var b=new be(new Zc(-1,{}),this.Da.Ge());b.We(this.H[0],a.M(this.H[0][gb]));return b},this);return new Vd(a,[])}var b=new be(new Zc(-1,{}),this.Da.Ge());this.H[n](function(a){var d=a instanceof T?this.Da.hc(a):this.Da[C][0].M(a);b.We(a,d)},this);return new Vd([b],this.Da.W())};
vh[z].jj=function(){var a=e(this.Da[C][y]),b=this.Da.Ge();this.Da[C][n](function(c,d){a[d]=new be(new Zc(c.ta.id(),{}),b);this.H[n](function(b){a[d].We(b,c.M(b))},this)},this);return new Vd(a,this.Da.W())};function wh(a,b){var c=a.map(function(a){return(new vh(a,b)).Kf()[C][0]});return new Vd(c,a[0].W())};
function xh(a,b){U[D](this,-1,1);this.h=a;this.Kb=b}K(xh,U);H=xh[z];f(H,function(){var a="project("+this.h[r]();if(null!==this.Kb)var b=this.Kb.map(function(a){return a.l()})[F](", "),a=a+(", groupBy("+b+")");return a+")"});H.ja=function(a,b){return 0==b[y]?[Yd()]:1==b[y]?[this.hi(b[0])]:[this.fi(b)]};H.lj=function(){return this.h[wb](function(a){return a instanceof T})||null!==this.Kb};H.fi=function(a){return wh(a,this.h)};H.hi=function(a){return 0==this.h[y]?a:(new vh(a,this.h)).Kf()};
function yh(){U[D](this,1,1)}K(yh,U);f(yh[z],Db("skip(?)"));yh[z].Zc=function(a){return this[r]()[Ja]("?",a.ma[r]())};yh[z].ja=function(a,b,c){return[new Vd(b[0][C][w](c.ma),b[0].W())]};
function zh(){}K(zh,vg);zh[z].zb=function(a){var b=Ef(a,function(a){return a instanceof th||a instanceof yh});if(0==b[y])return a;var c=this.ui(a);if(null===c)return a;b[n](function(a){this.Fj(a,c)},this);return c.Hb()};zh[z].Fj=function(a,b){a instanceof th?b.Yd=!0:b.Zd=!0;return Ff(a).parent};zh[z].ui=function(a){a=Ef(a,function(a){return a instanceof kh},function(a){return a instanceof xh&&a.lj()||a instanceof uh||1!=a.ua()||a instanceof lh});return 0<a[y]?a[0]:null};
function Ah(a){this.m=a}K(Ah,vg);Ah[z].zb=function(a){var b=Bh(a);if(null===b)return a;a=this.eh(b);a==b&&(a=this.dh(b));return a.Hb()};Ah[z].eh=function(a){var b=a,c=Ch(a.pb(0));if(null!==c){var d;d=a.J;for(var g=null,h=c[t].Ga(),l=0;l<h[y]&&null===g;l++)g=Dh(h[l],d);d=g;if(null===d)return b;b=new kh(this.m,d.rb,new gh(d.rb),d.Uf);d=new mh(this.m,c[t]);d.ia(b);Ff(a);b=Jf(c,c,d,b)}return b};
Ah[z].dh=function(a){var b=a,c=Eh(a.pb(0));if(null!==c){var d=Dh(c[Za],a.J);if(null===d)return b;c.Te=d.Uf;b=Ff(a).parent}return b};function Eh(a){a=Ef(a,function(a){return a instanceof kh},function(a){return 1!=a.ua()});return 0<a[y]?a[0]:null}function Ch(a){a=Ef(a,function(a){return a instanceof nh},function(a){return 1!=a.ua()});return 0<a[y]?a[0]:null}function Bh(a){a=Ef(a,function(a){return a instanceof uh});return 0<a[y]?a[0]:null}
function Dh(a,b){if(a.h[y]!=b[y]||!b[yb](function(b,c){return b.K[k]()==a.h[c].cb[k]()}))return null;var c=Fh(b,a);return c[0]||c[1]?{rb:a,Uf:c[1]}:null}function Fh(a,b){var c=a[kb](function(a,b){return a<<1|(0==b.mb?0:1)},0),d=b.h[kb](function(a,b){return a<<1|(0==b.mb?0:1)},0),d=c^d,c=0==d,d=d==ea.pow(2,ea.max(a[y],b.h[y]))-1;return[c,d]};
function Gh(a,b,c){this.Ea=a;this.Wj=b;this.Ue=c}Gh[z].gc=function(){this.Ue[n](function(a){this.Ea=a.zb(this.Ea,this.Wj)},this);return this.Ea};
function Hh(a,b){U[D](this,1,1);this.F=a;this.Dk=b}K(Hh,U);f(Hh[z],function(){return"update("+this.F[k]()+")"});Hh[z].ca=G("F");Hh[z].ja=function(a,b){var c=b[0][C].map(function(a){var b=this.F.dc(a.ta.Fa());this.Dk[n](function(a){b.w()[a.K[k]()]=a[x]},this);return b},this);a[zb](this.F,c);return[Yd()]};
function Ih(a){this.m=a}Ih[z].create=function(a,b){if(a instanceof ig||a instanceof hg)return this.ne(a,b);if(a instanceof og||a instanceof sg||a instanceof tg)return this.ne(a,b,[new oh(this.m),new Ah(this.m),new zh]);if(a instanceof jg||a instanceof kg)return this.ne(a,b,[new oh(this.m)]);throw new P("NotSupportedError","Unknown query plan node");};Ih[z].ne=function(a,b,c){a=Cf(a,J(this.Bj,this));return null!=c?new we((new Gh(a,b,c)).gc()):new we(a)};
Ih[z].Bj=function(a){if(a instanceof og)return new xh(a.h,a.Kb);if(a instanceof rg)return new eh(a.h);if(a instanceof qg)return new $f(a.h);if(a instanceof pg)return new uh(a.J);if(a instanceof tg)return new yh;if(a instanceof sg)return new th;if(a instanceof lg)return new lh(a.Ca.ka());if(a instanceof ng)return new yg;if(a instanceof ug)return new sh(a.Ca);if(a instanceof mg)return new nh(this.m,a[t]);if(a instanceof jg)return new dh(a[t]);if(a instanceof kg)return new Hh(a[t],a.df);if(a instanceof
ig)return new rh(this.m,a[t]);if(a instanceof hg)return new ph(this.m,a[t]);throw new P("NotSupportedError","Unknown node type");};

function Jh(a){this.zj=new ch;this.Qj=new Ih(a)}Jh[z].Ui=function(a){var b=this.zj[Va](a);return this.Qj[Va](b,a)};
function Kh(){this.cg=new N}H=Kh[z];H.td=function(a){var b=this.cg.get(a[k](),null);null===b&&(b=new Lh,this.cg.set(a[k](),b));return b};H.fj=function(a,b,c){b[n](function(b){this.td(b).ej(a,c)},this)};H.th=function(a,b,c){return b[yb](function(b){return this.td(b).sh(a,c)},this)};H.sg=function(a,b,c){var d=this.th(a,b,c);d&&this.fj(a,b,c);return d};H.Rd=function(a,b){b[n](function(b){this.td(b).Rd(a)},this)};H.Eh=function(a){a[n](function(a){this.td(a).ab=null},this)};
function Lh(){this.Wb=this.Pa=this.ab=this.Gc=null}Lh[z].Rd=function(a){this.Gc==a&&(this.Gc=null);this.ab==a&&(this.ab=null);null===this.Pa||this.Pa[m](a);null===this.Wb||this.Wb[m](a)};Lh[z].sh=function(a,b){var c=null===this.Pa||this.Pa.Ha();return 0==b?(null===this.Wb||this.Wb.Ha())&&c&&null===this.Gc&&null!==this.ab&&this.ab==a:3==b?null===this.Gc&&null===this.ab&&null!==this.Pa&&this.Pa[u](a):1==b?null===this.ab:c&&(null===this.ab||this.ab==a)};
Lh[z].ej=function(a,b){0==b?(this.ab=null,this.Gc=a):3==b?(null===this.Wb&&(this.Wb=new O),this.Wb.add(a),null===this.Pa&&(this.Pa=new O),this.Pa[m](a)):1==b?(null===this.Pa&&(this.Pa=new O),this.Pa.add(a)):2==b&&(this.ab=a)};
function Mh(){this.Sb=new Nh;this.Qc=new Kh}H=Mh[z];H.Ub=function(a){(2>a[pb]()||2>a[pb]())&&this.Qc.Eh(a.ca().c());this.Sb.sb(a);this.me();return a.Jc().ga};H.me=function(){for(var a=this.Sb.c(),b=0;b<a[y];b++){var c=a[b],d=!1;if(d=0==c.da()?this.tg(c,1,3):this.tg(c,2,0))this.Sb[m](c),this.ii(c)}};H.tg=function(a,b,c){var d=!1,g=a.ca().c();this.Qc.sg(a.ka(),g,b)&&(d=this.Qc.sg(a.ka(),g,c));return d};H.ii=function(a){a[Ia]()[A](J(this.Mj,this,a),J(this.Lj,this,a))};
H.Mj=function(a,b){this.Qc.Rd(a.ka(),a.ca().c());a.Jc()[vb](b);this.me()};H.Lj=function(a,b){this.Qc.Rd(a.ka(),a.ca().c());a.Jc()[jb](b);this.me()};function Nh(){this.Sb=[]}Nh[z].sb=function(a){pc(this.Sb,a,function(a,c){var d=a[pb]()-c[pb]();return 0==d?a.ka()-c.ka():d})};Nh[z].c=function(){return this.Sb[w]()};ja(Nh[z],function(a){var b=this.Sb;a=bc(b,a);var c;(c=0<=a)&&hc(b,a);return c});
function Oh(a,b){this.Zh=he.ue();this.Uc=a;this.Jd=b;this.H=this.Sh()}Oh[z].Sh=function(){if(0<this.Uc.h[y])return this.Uc.h;var a=[],b=this.Uc.f[w]();null!=this.Uc.De&&b[v](this.Uc.De);b[n](function(b){b.xb()[n](function(b){a[v](b)})});return a};Oh[z].L=function(a,b){return this.H[yb](function(c){return this.Zh.te(c.da(),"eq")(a.M(c),b.M(c))},this)};
Oh[z].bh=function(a,b){for(var c=null===a?[]:a[C],d=hd(c,b[C],J(this.L,this),function(a){return c[a]}),g=[],h=0,l=0;l<c[y];l++){var p=c[l];d[h]==p?h++:(p=this.Jd[E](h,1),p=Ph(l,p,0,this.Jd),g[v](p))}d=hd(c,b[C],J(this.L,this),function(a,c){return b[C][c]});for(l=h=0;l<b[C][y];l++)p=b[C][l],d[h]==p?h++:(this.Jd[E](l,0,p.ta.w()),p=Ph(l,[],1,this.Jd),g[v](p));return g};function Ph(a,b,c,d){return{Ek:c,index:a,object:d,Gk:b,type:"splice"}};
function Qh(){this.fc=new N}H=Qh[z];H.ye=function(a){return Ob(a)[r]()};H.ae=function(a,b){var c=this.ye(a.xd()),d=this.fc.get(c,null);null===d&&(d=new Rh(a),this.fc.set(c,d));d.ae(b)};H.Se=function(a,b){var c=this.ye(a.xd()),d=this.fc.get(c,null);L(null!=d,"Attempted to unobserve a query that was not observed.");var g=d.Se(b);L(g,"removeObserver: Inconsistent state detected.");d.nj()||this.fc[m](c)};
H.Ae=function(a){var b=new O;a[n](function(a){b.add(a[k]())});var c=[];this.fc.c()[n](function(a){a=a.Lc();a[Da].f[wb](function(a){return b[u](a[k]())})&&c[v](a)});return c};H.Og=function(a,b){var c=this.ye(null!=a.Ac?a.Ac:a),c=this.fc.get(c,null);return null!==c?(c.Ck(b),!0):!1};function Rh(a){this.nh=a;this.Tc=new O;this.Jj=[];this.$f=null;this.Vh=new Oh(a.xd(),this.Jj)}H=Rh[z];H.ae=function(a){this.Tc[u](a)?Yb("Attempted to register observer twice."):this.Tc.add(a)};H.Se=function(a){return this.Tc[m](a)};
H.Lc=function(){return this.nh.Si()};H.nj=function(){return 0<this.Tc.na()};H.Ck=function(a){var b=this.Vh.bh(this.$f,a);this.$f=a;0<b[y]&&this.Tc.c()[n](function(a){a(b)})};
function Sh(a,b){var c=a.o(Ad),d=b||{},g=d.storeType||0,h=new Ye;a.nb(vd,h);var h=null,l=!1;switch(g){case 1:h=new Ne(c);break;case 5:h=new Oe(c);break;case 4:h=new Se(a,c,d.webSqlDbSize);break;case 3:h=new He(c,d.firebase);l=!0;break;default:h=new Le(a,c)}a.nb(ud,h);var p=new yf;a.nb(wd,p);return h.Ba(d.onUpgrade)[A](function(){a.nb(xd,new Jh(a));var b=new Mh;a.nb(yd,b);b=new Qh;a.nb(zd,b);return p.Ba(c)})[A](function(){l&&(new Ce(a)).sk();return(new xf(a)).Ba(c)})};

function Th(a,b){this.m=a;this.vb=a.o(ud);this.Ra=a.o(yd);this.yb=a.o(zd);this.Sa=new O(b);this.Ya=new Pd(this.m,this.Sa.c());this.Tb=Uc();this.Hc=Uc();this.ef=Uc()}H=Th[z];ha(H,function(){this.ef[vb]();return this.Hc.ga});H.da=Db(1);H.ca=G("Sa");H.Jc=G("Tb");H.ka=function(){return Ob(this)};wa(H,Db(2));H.Sg=function(){this.Ra.Ub(this);return this.ef.ga};
H.kh=function(a){a=a.Lc();return a.Qe.Hb()[Ia](this.Ya,a[Da])[A](function(a){return a[0].ve()},J(function(a){this.Ya.Ab();var c=new Mc(a[rb]);this.Hc[jb](c);throw a;},this))};H.U=function(){this.vb.Fb(this.da(),this.Ya).U()[A](J(function(){this.Xc();this.Hc[vb]()},this),J(function(a){this.Ya.Ab();this.Hc[jb](a)},this));return this.Tb.ga};H.Ab=function(){this.Ya.Ab();this.Hc[vb]();return this.Tb.ga};H.Xc=function(){var a=this.yb.Ae(this.Sa.c());0!=a[y]&&(a=new Ae(this.m,a),this.Ra.Ub(a))};
function Uh(a){this.m=a;this.Ra=a.o(yd);this.$c=null;this.ya=0}I("lf.proc.Transaction",Uh,void 0);var Vh=new N(0,new O([1,4]),1,new O([2]),2,new O([3,5,6]),3,new O([2,7]),4,new O([7]),5,new O([7]),6,new O([7]));Uh[z].Ka=function(a){var b=Vh.get(this.ya,null);if(null===b||!b[u](a))throw new P("TransactionError","Invalid transaction state transition, from "+this.ya+" to "+a+".");this.ya=a};
ha(Uh[z],function(a){this.Ka(4);var b=[];try{a[n](function(a){a.jb();b[v](a.Lc())},this)}catch(c){return this.Ka(7),Rc(c)}a=new zg(this.m,b);return this.Ra.Ub(a)[A](J(function(a){this.Ka(7);return a.map(function(a){return a.ve()})},this),J(function(a){this.Ka(7);throw a;},this))});ha(Uh[z],Uh[z][Ia]);Uh[z].lh=function(a){this.Ka(1);this.$c=new Th(this.m,a);return this.$c.Sg()[A](J(function(){this.Ka(2)},this))};Uh[z].begin=Uh[z].lh;
Uh[z].jh=function(a){this.Ka(3);return this.$c.kh(a)[A](J(function(a){this.Ka(2);return a},this),J(function(a){this.Ka(7);throw a;},this))};Uh[z].attach=Uh[z].jh;Uh[z].U=function(){this.Ka(5);return this.$c.U()[A](J(function(){this.Ka(7)},this))};Uh[z].commit=Uh[z].U;Uh[z].Ab=function(){this.Ka(6);return this.$c.Ab()[A](J(function(){this.Ka(7)},this))};Uh[z].rollback=Uh[z].Ab;
function X(a){this.m=a;this.A=a.o(Ad);this.Ce=!1}I("lf.proc.Database",X,void 0);X[z].Ba=function(a){this.m.nb(Ad,this.A);return Sh(this.m,a)[A](J(function(){this.Ce=!0;return this},this))};X[z].init=X[z].Ba;X[z].Jb=G("A");X[z].getSchema=X[z].Jb;X[z].cc=function(){if(!this.Ce)throw new P("UninitializedError","Database is not initialized");};X[z].select=function(a){this.cc();return new W(this.m,1!=arguments[y]||null!=arguments[0]?e[z][w][D](arguments):[])};X[z].select=X[z].select;
X[z].sb=function(){this.cc();return new Pg(this.m)};X[z].insert=X[z].sb;X[z].Ee=function(){this.cc();return new Pg(this.m,!0)};X[z].insertOrReplace=X[z].Ee;Ca(X[z],function(a){this.cc();return new Tg(this.m,a)});Ca(X[z],X[z][zb]);xa(X[z],function(){this.cc();return new Og(this.m)});X[z]["delete"]=X[z][qb];X[z].observe=function(a,b){this.m.o(zd).ae(a,b)};X[z].observe=X[z].observe;X[z].unobserve=function(a,b){this.m.o(zd).Se(a,b)};X[z].unobserve=X[z].unobserve;X[z].Qh=function(){this.cc();return new Uh(this.m)};
X[z].createTransaction=X[z].Qh;ra(X[z],function(){try{this.m.o(ud)[cb]()}catch(a){}this.m[Pa]();this.Ce=!1});ra(X[z],X[z][cb]);
function Y(a,b,c,d,g,h){this.F=a;this.B=b;this.Wf=c;this.Tf=d;this.Lg=g;this.ib=h||null;this.i=this.C=null}I("lf.schema.BaseColumn",Y,void 0);H=Y[z];ia(H,G("B"));H.l=function(){return this.F.Aa()+"."+this.B};f(H,function(){return this.l()});H.Z=G("F");H.da=G("Lg");H.Ua=G("ib");H.Ga=function(){null==this.qa&&(this.qa=[],this.Z().Ga()[n](function(a){-1!=a.h.map(function(a){return a.cb[k]()})[ob](this.B)&&this.qa[v](a)},this));return this.qa};H.lc=G("Tf");H.Fd=G("Wf");H.Ye=Cb("C");H.getParent=G("C");
H.Y=G("i");H.Na=function(a){return Uf(this,a,"eq")};Y[z].eq=Y[z].Na;Y[z].dg=function(a){return Uf(this,a,"neq")};Y[z].neq=Y[z].dg;Y[z].Ke=function(a){return Uf(this,a,"lt")};Y[z].lt=Y[z].Ke;Y[z].Aj=function(a){return Uf(this,a,"lte")};Y[z].lte=Y[z].Aj;Y[z].gj=function(a){return Uf(this,a,"gt")};Y[z].gt=Y[z].gj;Y[z].hj=function(a){return Uf(this,a,"gte")};Y[z].gte=Y[z].hj;Y[z].match=function(a){return Uf(this,a,"match")};Y[z].match=Y[z].match;Y[z].mh=function(a,b){return Uf(this,[a,b],"between")};
Y[z].between=Y[z].mh;Y[z].oj=function(a){return Uf(this,a,"in")};Y[z]["in"]=Y[z].oj;Y[z].uj=function(){return this.Na(null)};Y[z].isNull=Y[z].uj;Y[z].tj=function(){return this.dg(null)};Y[z].isNotNull=Y[z].tj;Y[z].wc=function(a){return new Y(this.F,this.B,this.Wf,this.Tf,this.Lg,a)};Y[z].as=Y[z].wc;
function Wh(){this.Ud=new N}var Xh;ma(Wh[z],function(){this.Ud[Pa]()});ma(Wh[z],Wh[z][Pa]);Wh[z].nb=function(a,b){this.Ud.set(a[r](),b);return b};Wh[z].registerService=Wh[z].nb;Wh[z].o=function(a){var b=this.Ud.get(a[r](),null);if(null==b)throw new P("NotFoundError",a[r]());return b};Wh[z].getService=Wh[z].o;Wh[z].Ie=function(a){return this.Ud.s(a[r]())};Wh[z].isRegistered=Wh[z].Ie;
var Yh={};I("lf.ConstraintAction",Yh,void 0);Yh.RESTRICT=0;Yh.CASCADE=1;var Zh={};I("lf.ConstraintTiming",Zh,void 0);Zh.IMMEDIATE=0;Zh.DEFERRABLE=1;
function $h(a,b){this.Tj=a;this.Hj=b}$h[z].xe=G("Tj");$h[z].Ri=G("Hj");
function Z(a){this.B=a;this.H=new N;this.bf=new O;this.rc=new O;this.Id=new O;var b=this.B;this.nc="pk"+(b[0].toUpperCase()+b.substring(1));this.qa=new N;this.Md=!1;this.yc(a)}I("lf.schema.TableBuilder",Z,void 0);function ai(a){za(this,a[rb]);this.mb=a.order;this.autoIncrement=a[Na]}var bi=new O([0,6]);
Z[z].yc=function(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new P("SyntaxError",a+" violates naming rule");if(this.H.s(a)||this.qa.s(a)||this.rc[u](a))throw new P("SyntaxError",this.B+"."+a+" is already defined");};
Z[z].zh=function(a){var b=!1;a[n](function(a){var d=this.H.get(a[rb]);b=b||a[Na];if(a[Na]&&3!=d)throw new P("SyntaxError","Can not use autoIncrement with a non-integer primary key.");},this);if(b&&1<a[y])throw new P("SyntaxError","Can not use autoIncrement with a cross-column primary key.");};Z[z].Ug=function(a,b){this.yc(a);this.H.set(a,b);bi[u](b)&&this.hf([a]);return this};Z[z].addColumn=Z[z].Ug;
Z[z].Xg=function(a,b){this.yc(this.nc);var c=this.Hd(a,!0,void 0,b);this.zh(c);1==c[y]&&this.bf.add(c[0][rb]);this.rc.add(this.nc);this.qa.set(this.nc,c);return this};Z[z].addPrimaryKey=Z[z].Xg;Z[z].Vg=function(a,b){Fb(b.action)||(b.action=0);Fb(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new P("SyntaxError","Lovefield allows only immediate evaluation of cascading constraints");return this};Z[z].addForeignKey=Z[z].Vg;
Z[z].Yg=function(a,b){this.yc(a);var c=this.Hd(b,!0);1==c[y]&&this.bf.add(c[0][rb]);this.qa.set(a,c);this.rc.add(a);return this};Z[z].addUnique=Z[z].Yg;Z[z].hf=function(a){a=this.Hd(a,!1);this.yh(a);a[n](function(a){this.Id.add(a[rb])},this);return this};Z[z].addNullable=Z[z].hf;
Z[z].yh=function(a){this.qa.G()[n](function(b){var c=new O;this.qa.get(b)[n](function(a){c.add(a[rb])});var d=a[Ea](function(a){return c[u](a[rb])});if(1<c.na()&&0<d[y])throw new P("SyntaxError","Cross-column index "+b+" refers to nullable columns: "+d[F](","));},this)};Z[z].Wg=function(a,b,c,d){this.yc(a);b=this.Hd(b,!0,d);this.xh(a,b);c&&this.rc.add(a);this.qa.set(a,b);return this};Z[z].addIndex=Z[z].Wg;
Z[z].xh=function(a,b){if(1<b[y]){var c=b[Ea](function(a){return this.Id[u](a[rb])},this);if(0<c[y])throw new P("SyntaxError","Cross-column index "+a+" refers to nullable columns: "+c[F](","));}};Z[z].Rb=Cb("Md");Z[z].persistentIndex=Z[z].Rb;Z[z].Jb=function(){return new (this.Ji())};Z[z].getSchema=Z[z].Jb;
Z[z].Hd=function(a,b,c,d){var g=a,g="string"==typeof a[0]?a.map(function(a){return new ai({name:a,order:c||1,autoIncrement:d||!1})}):a.map(function(a){return new ai(a)});g[n](function(a){if(!this.H.s(a[rb]))throw new P("SyntaxError",this.B+" does not have column: "+a[rb]);if(b){var c=this.H.get(a[rb]);if(0==c||6==c)throw new P("SyntaxError",this.B+" index on non-indexable column: "+a[rb]);}},this);return g};
Z[z].Ji=function(){function a(){function a(c){return b.qa.get(c).map(function(a){return{cb:this[a[rb]],mb:a.mb,autoIncrement:a[Na]}},this)}var d=b.H.G().map(function(a){this[a]=new Y(this,a,b.bf[u](a),b.Id[u](a),b.H.get(a));return this[a]},this),g=b.qa.G().map(function(d){return new Wf(b.B,d,b.rc[u](d),a[D](this,d))},this);Xf[D](this,b.B,d,g,b.Md);var h=b.qa.s(b.nc)?new Wf(b.B,b.nc,!0,a[D](this,b.nc)):null,l=d[Ea](function(a){return!b.Id[u](a[k]())}),p=b.rc.c().map(function(d){return new Wf(b.B,d,
!0,a[D](this,d))},this);this.Ih=new $h(h,l,[],p);this.wg=b.Fi(d,g)}var b=this;K(a,Xf);a[z].wb=function(a){return new this.wg($c++,a)};a[z].createRow=a[z].wb;a[z].dc=function(a){var b={};this.xb()[n](function(g){var h=g[k]();g=g.da();var l=a[x][h];if(0==g)if(null===l)g=l;else if(g=l,""==g)g=null;else{0!=g[y]%2&&(g="0"+g);for(var l=new ArrayBuffer(g[y]/2),p=new Uint8Array(l),B=0,Ra=0;B<g[y];B+=2)p[Ra++]=ga(g.substr(B,2),16);g=l}else g=2==g?null===l?l:new Date(l):l;b[h]=g},this);return new this.wg(a.id,
b)};a[z].deserializeRow=a[z].dc;a[z].ic=G("Ih");a[z].getConstraint=a[z].ic;return a};
Z[z].Fi=function(a,b){function c(c,d){this.H=a;this.qa=b;Zc[D](this,c,d)}K(c,Zc);c[z].xf=function(){var a={};this.H[n](function(b){a[b[k]()]=b.lc()?null:ge[b.da()]});return a};c[z].Ig=function(){var a={};this.H[n](function(b){var c=b[k]();b=b.da();var d=this.w()[c];a[c]=0==b?null===d?d:cd(d):2==b?null===d?d:d[Qa]():d},this);return a};var d=J(function(a){var b=this.H.get(a[k]());return 2==b?function(b){b=b[a[k]()];return a.lc()&&null===b?null:b[Qa]()}:1==b?function(b){return a.lc()?(b=b[a[k]()],null===
b?null:b?1:0):b[a[k]()]?1:0}:function(b){return b[a[k]()]}},this),g=J(function(a){var b=a.map(function(a){return d(a.cb)});return function(a){return b.map(function(b){return b(a)})}},this),h={};b[n](function(a){var b=a.l();a=1==a.h[y]?d(a.h[0].cb):g(a.h);h[b]=a});c[z].Pc=function(a){return-1!=a[ob]("#")?this.id():h[bb](a)?h[a](this.w()):null};return c};
function ci(a,b){this.A=new di(a,b);this.pc=new N;this.Ic=!1}I("lf.schema.Builder",ci,void 0);ci[z].pi=function(){this.Ic||(this.pc.G()[n](function(a){a=this.pc.get(a);this.A.lk(a.Jb())},this),this.pc[Pa](),this.Ic=!0)};ci[z].Jb=function(){this.Ic||this.pi();return this.A};ci[z].getSchema=ci[z].Jb;ci[z].Ff=function(){var a=new td("ns_"+this.A[rb]()),b;Xh||(Xh=new Wh);b=Xh;var c=null;b.Ie(a)?c=b.o(a):(c=new Wh,b.nb(a,c));return c};ci[z].getGlobal=ci[z].Ff;
ci[z].connect=function(a){var b=this.Ff();b.Ie(Ad)||b.nb(Ad,this.Jb());return(new X(b)).Ba(a)};ci[z].connect=ci[z].connect;ci[z].Oh=function(a){if(this.pc.s(a)||this.Ic)throw new P("SyntaxError","Table is already created or schema is already finalized.");this.pc.set(a,new Z(a));return this.pc.get(a)};ci[z].createTable=ci[z].Oh;ci[z].Ze=function(a){if(this.Ic)throw new P("SyntaxError","Schema is already finalized.");this.A.Ze(a);return this};ci[z].setPragma=ci[z].Ze;
function di(a,b){this.B=a;this.Ma=b;this.I=new N;this.ng={Wh:!1}}I("lf.schema.DatabaseSchema",di,void 0);za(di[z],G("B"));za(di[z],di[z][rb]);di[z].version=G("Ma");di[z].version=di[z][Fa];di[z].gb=function(){return this.I.c()};di[z].tables=di[z].gb;oa(di[z],function(a){if(!this.I.s(a))throw new P("NotFoundError",a+" is not found in database");return this.I.get(a)});oa(di[z],di[z][t]);di[z].lk=function(a){this.I.set(a[k](),a)};di[z].mg=G("ng");di[z].pragma=di[z].mg;di[z].Ze=Cb("ng");
I("lf.schema.create",function(a,b){return new ci(a,b)},void 0);}.bind(window))()
